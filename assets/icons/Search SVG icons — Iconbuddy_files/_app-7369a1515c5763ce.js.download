(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{69409:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var i=n(87462),r=n(91),s=n(86854),o=n(77089),a=n(67294),l=n(31236),c=n(70314),u=n(83937),h=function(e){var t=e.x,n=e.y,i=e.color,r=e.onCompleted,s=(0,a.useRef)(null),l=Number.isNaN(+n)?0:n-10,c=Number.isNaN(+t)?0:t-10;return(0,a.useEffect)(function(){if(s.current)return s.current.addEventListener("animationend",r),function(){s.current&&s.current.removeEventListener("animationend",r)}}),a.createElement("div",{ref:s,className:"jsx-3424889537 drip"},a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{top:l,left:c},className:"jsx-3424889537"},a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3424889537"},a.createElement("g",{fill:i,className:"jsx-3424889537"},a.createElement("rect",{width:"100%",height:"100%",rx:"10",className:"jsx-3424889537"})))),a.createElement(o.Z,{id:"3424889537"},".drip.jsx-3424889537{position:absolute;left:0;right:0;top:0;bottom:0;}svg.jsx-3424889537{position:absolute;-webkit-animation:350ms ease-in expand-jsx-3424889537;animation:350ms ease-in expand-jsx-3424889537;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;width:1rem;height:1rem;}@-webkit-keyframes expand-jsx-3424889537{0%{opacity:0;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}30%{opacity:1;}80%{opacity:0.5;}100%{-webkit-transform:scale(28);-ms-transform:scale(28);transform:scale(28);opacity:0;}}@keyframes expand-jsx-3424889537{0%{opacity:0;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}30%{opacity:1;}80%{opacity:0.5;}100%{-webkit-transform:scale(28);-ms-transform:scale(28);transform:scale(28);opacity:0;}}"))};h.defaultProps={x:0,y:0},h.displayName="GeistButtonDrip";var d=n(80731),p=function(e){var t=e.color;return a.createElement("div",{className:"jsx-3416748964 btn-loading"},a.createElement(d.Z,{color:t}),a.createElement(o.Z,{id:"3416748964"},".btn-loading.jsx-3416748964{position:absolute;top:0;left:0;right:0;bottom:0;z-index:2;background-color:var(--geist-ui-button-bg);}"))};p.displayName="GeistButtonLoading";var f=n(95073),m=["isRight","isSingle","children","className"],g=function(e){var t=e.isRight,n=e.isSingle,s=e.children,l=e.className,c=(0,r.Z)(e,m),u=(0,f.Z)("icon",{right:t,single:n},l);return a.createElement("span",(0,i.Z)({},c,{className:"jsx-643337184 "+(c&&null!=c.className&&c.className||u||"")}),s,a.createElement(o.Z,{id:"643337184"},".icon.jsx-643337184{position:absolute;left:var(--geist-ui-button-icon-padding);right:auto;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--geist-ui-button-color);z-index:1;}.right.jsx-643337184{right:var(--geist-ui-button-icon-padding);left:auto;}.icon.jsx-643337184 svg{background:transparent;height:calc(var(--geist-ui-button-height) / 2.35);width:calc(var(--geist-ui-button-height) / 2.35);}.single.jsx-643337184{position:static;-webkit-transform:none;-ms-transform:none;transform:none;}"))};g.defaultProps={isRight:!1,className:""},g.displayName="GeistButtonIcon";var _=function(e,t,n){var i=n.icon,r=n.iconRight,s=i||r,l=!!r,c=e?"calc(var(--geist-ui-button-height) / 2 + var(--geist-ui-button-icon-padding) * .5)":0,u=(0,f.Z)("text",l?"right":"left");return s?0===a.Children.count(t)?a.createElement(g,{isRight:l,isSingle:!0},s):a.createElement(a.Fragment,null,a.createElement(g,{isRight:l},s),a.createElement("div",{className:o.Z.dynamic([["3568181479",[c,c]]])+" "+(u||"")},t,a.createElement(o.Z,{id:"3568181479",dynamic:[c,c]},".left.__jsx-style-dynamic-selector{padding-left:".concat(c,";}.right.__jsx-style-dynamic-selector{padding-right:").concat(c,";}")))):a.createElement("div",{className:"text"},t)},v=a.createContext({isButtonGroup:!1,disabled:!1}),y=n(5350),w=function(e,t){var n=t.type,i=t.disabled,r=t.ghost,s={default:{bg:e.background,border:e.border,color:e.accents_5},secondary:{bg:e.foreground,border:e.foreground,color:e.background},success:{bg:e.success,border:e.success,color:"#fff"},warning:{bg:e.warning,border:e.warning,color:"#fff"},error:{bg:e.error,border:e.error,color:"#fff"},abort:{bg:"transparent",border:"transparent",color:e.accents_5}};if(i)return{bg:e.accents_1,border:e.accents_2,color:"#ccc"};var o=null==n?void 0:n.replace("-light",""),a=s.default;return r?({secondary:{bg:e.background,border:e.foreground,color:e.foreground},success:{bg:e.background,border:e.success,color:e.success},warning:{bg:e.background,border:e.warning,color:e.warning},error:{bg:e.background,border:e.error,color:e.error}})[o]||a:s[o]||a},b=function(e,t){var n=t.type,r=t.disabled,s=t.loading,o=t.shadow,a=t.ghost,l=w(e,t),c=(0,y.j)(l.bg,.85),u={default:{bg:e.background,border:e.foreground},secondary:{bg:e.background,border:e.foreground},success:{bg:e.background,border:e.success},warning:{bg:e.background,border:e.warning},error:{bg:e.background,border:e.error},abort:{bg:"transparent",border:"transparent",color:e.accents_5},"secondary-light":(0,i.Z)({},l,{bg:c}),"success-light":(0,i.Z)({},l,{bg:c}),"warning-light":(0,i.Z)({},l,{bg:c}),"error-light":(0,i.Z)({},l,{bg:c})};if(r)return{bg:e.accents_1,border:e.accents_2,color:"#ccc"};if(s)return(0,i.Z)({},l,{color:"transparent"});if(o)return l;var h=(a?({secondary:{bg:e.foreground,border:e.background,color:e.background},success:{bg:e.success,border:e.background,color:"white"},warning:{bg:e.warning,border:e.background,color:"white"},error:{bg:e.error,border:e.background,color:"white"}})[n.replace("-light","")]||null:u[n])||u.default;return(0,i.Z)({},h,{color:h.color||h.border})},I=function(e,t){var n=t.type.endsWith("light"),i=b(e,t);return n?(0,y.j)(i.bg,.65):(0,y.j)(e.accents_2,.65)},C=["children","disabled","type","loading","shadow","ghost","effect","onClick","auto","icon","htmlType","iconRight","className"],T=a.forwardRef(function(e,t){var n=(0,u.Z)(),c=(0,l.ZP)().SCALES,d=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,function(){return d.current});var m=(0,a.useState)(!1),g=(0,s.Z)(m,2),y=g[0],T=g[1],k=(0,a.useState)(0),E=(0,s.Z)(k,2),S=E[0],P=E[1],R=(0,a.useState)(0),N=(0,s.Z)(R,2),x=N[0],A=N[1],O=a.useContext(v),D=O.isButtonGroup?(0,i.Z)({},e,{auto:!0,shadow:!1,ghost:O.ghost||e.ghost,type:O.type||e.type,disabled:O.disabled||e.disabled}):e,L=D.children,M=D.disabled,F=(D.type,D.loading),U=D.shadow,j=D.ghost,q=D.effect,z=D.onClick,W=D.auto,V=D.icon,B=D.htmlType,H=D.iconRight,$=D.className,G=(0,r.Z)(D,C),K=(0,a.useMemo)(function(){return w(n.palette,D)},[n.palette,D]),Z=K.bg,Y=K.border,J=K.color,Q=(0,a.useMemo)(function(){return b(n.palette,D)},[n.palette,D]),X=(0,a.useMemo)(function(){return M?{cursor:"not-allowed",events:"auto"}:F?{cursor:"default",events:"none"}:{cursor:"pointer",events:"auto"}},[M,F]),ee=X.cursor,et=X.events,en=(0,a.useMemo)(function(){return I(n.palette,D)},[n.palette,D]),ei=(0,a.useMemo)(function(){return _(W,L,{icon:V,iconRight:H})},[W,L,V,H]),er=W?c.pl(1.15):c.pl(1.375),es=W?c.pr(1.15):c.pr(1.375);return a.createElement("button",(0,i.Z)({ref:d,type:B,disabled:M,onClick:function(e){if(!M&&!F){if(!U&&!j&&q&&d.current){var t=d.current.getBoundingClientRect();T(!0),P(e.clientX-t.left),A(e.clientY-t.top)}z&&z(e)}}},G,{className:o.Z.dynamic([["86551275",[c.height(2.5),n.layout.radius,c.font(.875),J,Z,Y,ee,et,U?n.expressiveness.shadowSmall:"none",c.pl(.727),c.height(2.5),J,Z,W?"min-content":c.width(10.5),W?"auto":"initial",c.height(2.5),c.pt(0),es,c.pb(0),er,c.mt(0),c.mr(0),c.mb(0),c.ml(0),Q.color,Q.color,Q.bg,Q.border,ee,et,U?n.expressiveness.shadowMedium:"none",U?"-1px":"0px"]]])+" "+(G&&null!=G.className&&G.className||(0,f.Z)("btn",$)||"")}),F&&a.createElement(p,{color:J}),ei,y&&a.createElement(h,{x:S,y:x,color:en,onCompleted:function(){T(!1),P(0),A(0)}}),a.createElement(o.Z,{id:"86551275",dynamic:[c.height(2.5),n.layout.radius,c.font(.875),J,Z,Y,ee,et,U?n.expressiveness.shadowSmall:"none",c.pl(.727),c.height(2.5),J,Z,W?"min-content":c.width(10.5),W?"auto":"initial",c.height(2.5),c.pt(0),es,c.pb(0),er,c.mt(0),c.mr(0),c.mb(0),c.ml(0),Q.color,Q.color,Q.bg,Q.border,ee,et,U?n.expressiveness.shadowMedium:"none",U?"-1px":"0px"]},".btn.__jsx-style-dynamic-selector{box-sizing:border-box;display:inline-block;line-height:".concat(c.height(2.5),";border-radius:").concat(n.layout.radius,";font-weight:400;font-size:").concat(c.font(.875),";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;text-transform:capitalize;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;white-space:nowrap;-webkit-transition:background-color 200ms ease 0ms,box-shadow 200ms ease 0ms, border 200ms ease 0ms,color 200ms ease 0ms;transition:background-color 200ms ease 0ms,box-shadow 200ms ease 0ms, border 200ms ease 0ms,color 200ms ease 0ms;position:relative;overflow:hidden;color:").concat(J,";background-color:").concat(Z,";border:1px solid ").concat(Y,";cursor:").concat(ee,";pointer-events:").concat(et,";box-shadow:").concat(U?n.expressiveness.shadowSmall:"none",";--geist-ui-button-icon-padding:").concat(c.pl(.727),";--geist-ui-button-height:").concat(c.height(2.5),";--geist-ui-button-color:").concat(J,";--geist-ui-button-bg:").concat(Z,";min-width:").concat(W?"min-content":c.width(10.5),";width:").concat(W?"auto":"initial",";height:").concat(c.height(2.5),";padding:").concat(c.pt(0)," ").concat(es," ").concat(c.pb(0)," ").concat(er,";margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0)," ").concat(c.ml(0),";}.btn.__jsx-style-dynamic-selector:hover,.btn.__jsx-style-dynamic-selector:focus{color:").concat(Q.color,";--geist-ui-button-color:").concat(Q.color,";background-color:").concat(Q.bg,";border-color:").concat(Q.border,";cursor:").concat(ee,";pointer-events:").concat(et,";box-shadow:").concat(U?n.expressiveness.shadowMedium:"none",";-webkit-transform:translate3d(0px,").concat(U?"-1px":"0px",",0px);-ms-transform:translate3d(0px,").concat(U?"-1px":"0px",",0px);transform:translate3d(0px,").concat(U?"-1px":"0px",",0px);}.btn.__jsx-style-dynamic-selector .text{position:relative;z-index:1;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;line-height:inherit;top:-1px;}.btn.__jsx-style-dynamic-selector .text p,.btn.__jsx-style-dynamic-selector .text pre,.btn.__jsx-style-dynamic-selector .text div{margin:0;}")))});T.defaultProps={type:"default",htmlType:"button",ghost:!1,loading:!1,shadow:!1,auto:!1,effect:!0,disabled:!1,className:""},T.displayName="GeistButton";var k=(0,c.Z)(T)},84633:function(e,t,n){"use strict";var i=n(69409);t.Z=i.Z},80731:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(87462),r=n(91),s=n(77089),o=n(67294),a=n(83937),l=n(31236),c=n(70314),u=n(95073),h=["children","type","color","className","spaceRatio"],d=function(e,t,n){var i={default:t.accents_6,secondary:t.secondary,success:t.success,warning:t.warning,error:t.error};return n||i[e]},p=function(e){var t=e.children,n=e.type,c=e.color,p=e.className,f=e.spaceRatio,m=(0,r.Z)(e,h),g=(0,a.Z)(),_=(0,l.ZP)().SCALES,v=(0,u.Z)("loading-container",p),y=(0,o.useMemo)(function(){return d(n,g.palette,c)},[n,g.palette,c]);return o.createElement("div",(0,i.Z)({},m,{className:s.Z.dynamic([["2201634259",[_.font(1),_.width(1,"100%"),_.height(1,"100%"),_.pt(0),_.pr(0),_.pb(0),_.pl(0),_.mt(0),_.mr(0),_.mb(0),_.ml(0),g.palette.accents_5,y,f]]])+" "+(m&&null!=m.className&&m.className||v||"")}),o.createElement("span",{className:s.Z.dynamic([["2201634259",[_.font(1),_.width(1,"100%"),_.height(1,"100%"),_.pt(0),_.pr(0),_.pb(0),_.pl(0),_.mt(0),_.mr(0),_.mb(0),_.ml(0),g.palette.accents_5,y,f]]])+" loading"},t&&o.createElement("label",{className:s.Z.dynamic([["2201634259",[_.font(1),_.width(1,"100%"),_.height(1,"100%"),_.pt(0),_.pr(0),_.pb(0),_.pl(0),_.mt(0),_.mr(0),_.mb(0),_.ml(0),g.palette.accents_5,y,f]]])},t),o.createElement("i",{className:s.Z.dynamic([["2201634259",[_.font(1),_.width(1,"100%"),_.height(1,"100%"),_.pt(0),_.pr(0),_.pb(0),_.pl(0),_.mt(0),_.mr(0),_.mb(0),_.ml(0),g.palette.accents_5,y,f]]])}),o.createElement("i",{className:s.Z.dynamic([["2201634259",[_.font(1),_.width(1,"100%"),_.height(1,"100%"),_.pt(0),_.pr(0),_.pb(0),_.pl(0),_.mt(0),_.mr(0),_.mb(0),_.ml(0),g.palette.accents_5,y,f]]])}),o.createElement("i",{className:s.Z.dynamic([["2201634259",[_.font(1),_.width(1,"100%"),_.height(1,"100%"),_.pt(0),_.pr(0),_.pb(0),_.pl(0),_.mt(0),_.mr(0),_.mb(0),_.ml(0),g.palette.accents_5,y,f]]])})),o.createElement(s.Z,{id:"2201634259",dynamic:[_.font(1),_.width(1,"100%"),_.height(1,"100%"),_.pt(0),_.pr(0),_.pb(0),_.pl(0),_.mt(0),_.mr(0),_.mb(0),_.ml(0),g.palette.accents_5,y,f]},".loading-container.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;font-size:".concat(_.font(1),";width:").concat(_.width(1,"100%"),";height:").concat(_.height(1,"100%"),";min-height:1em;padding:").concat(_.pt(0)," ").concat(_.pr(0)," ").concat(_.pb(0)," ").concat(_.pl(0),";margin:").concat(_.mt(0)," ").concat(_.mr(0)," ").concat(_.mb(0)," ").concat(_.ml(0),";}label.__jsx-style-dynamic-selector{margin-right:0.5em;color:").concat(g.palette.accents_5,";line-height:1;}label.__jsx-style-dynamic-selector *{margin:0;}.loading.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;width:100%;height:100%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}i.__jsx-style-dynamic-selector{width:0.25em;height:0.25em;border-radius:50%;background-color:").concat(y,";margin:0 calc(0.25em / 2 * ").concat(f,");display:inline-block;-webkit-animation:loading-blink-__jsx-style-dynamic-selector 1.4s infinite both;animation:loading-blink-__jsx-style-dynamic-selector 1.4s infinite both;}i.__jsx-style-dynamic-selector:nth-child(2){-webkit-animation-delay:0.2s;animation-delay:0.2s;}i.__jsx-style-dynamic-selector:nth-child(3){-webkit-animation-delay:0.4s;animation-delay:0.4s;}@-webkit-keyframes loading-blink-__jsx-style-dynamic-selector{0%{opacity:0.2;}20%{opacity:1;}100%{opacity:0.2;}}@keyframes loading-blink-__jsx-style-dynamic-selector{0%{opacity:0.2;}20%{opacity:1;}100%{opacity:0.2;}}")))};p.defaultProps={type:"default",className:"",spaceRatio:1},p.displayName="GeistLoading";var f=(0,c.Z)(p)},9696:function(e,t,n){"use strict";var i=n(87462),r=n(86854),s=n(91),o=n(67294),a=["children","className","visible","enterTime","leaveTime","clearTime","name"],l=function(e){var t=e.children,n=e.className,l=e.visible,c=e.enterTime,u=e.leaveTime,h=e.clearTime,d=e.name,p=(0,s.Z)(e,a),f=(0,o.useState)(""),m=(0,r.Z)(f,2),g=m[0],_=m[1],v=(0,o.useState)(l),y=(0,r.Z)(v,2),w=y[0],b=y[1];return((0,o.useEffect)(function(){var e=l?"enter":"leave",t=l?c:u;l&&!w&&b(!0),_("".concat(d,"-").concat(e));var n=setTimeout(function(){_("".concat(d,"-").concat(e," ").concat(d,"-").concat(e,"-active")),clearTimeout(n)},t),i=setTimeout(function(){l||(_(""),b(!1)),clearTimeout(i)},t+h);return function(){clearTimeout(n),clearTimeout(i)}},[l,w]),o.isValidElement(t)&&w)?o.cloneElement(t,(0,i.Z)({},p,{className:"".concat(t.props.className," ").concat(n," ").concat(g)})):null};l.defaultProps={visible:!1,enterTime:60,leaveTime:60,clearTime:60,className:"",name:"transition"},l.displayName="GeistCssTransition",t.Z=l},77089:function(e,t,n){"use strict";n.d(t,{server:function(){return p}});var i,r,s=n(67294),o=n(83454),a={},l={},c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},u={};!function(e){e.__esModule=!0,e.default=void 0;var t=void 0!==o&&o.env&&!0,n=function(e){return"[object String]"===Object.prototype.toString.call(e)},i=function(){function e(e){var i=void 0===e?{}:e,s=i.name,o=void 0===s?"stylesheet":s,a=i.optimizeForSpeed,l=void 0===a?t:a,c=i.isBrowser,u=void 0===c?"undefined"!=typeof window:c;r(n(o),"`name` must be a string"),this._name=o,this._deletedRulePlaceholder="#"+o+"-deleted-rule____{}",r("boolean"==typeof l,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=l,this._isBrowser=u,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var h=this._isBrowser&&document.querySelector('meta[property="csp-nonce"]');this._nonce=h?h.getAttribute("content"):null}var i=e.prototype;return i.setOptimizeForSpeed=function(e){r("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),r(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},i.isOptimizeForSpeed=function(){return this._optimizeForSpeed},i.inject=function(){var e=this;if(r(!this._injected,"sheet already injected"),this._injected=!0,this._isBrowser&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(t||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),n},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},i.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},i.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},i.insertRule=function(e,i){if(r(n(e),"`insertRule` accepts only strings"),!this._isBrowser)return"number"!=typeof i&&(i=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,i),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof i&&(i=s.cssRules.length);try{s.insertRule(e,i)}catch(n){return t||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var o=this._tags[i];this._tags.push(this.makeStyleTag(this._name,e,o))}return this._rulesCount++},i.replaceRule=function(e,n){if(this._optimizeForSpeed||!this._isBrowser){var i=this._isBrowser?this.getSheet():this._serverSheet;if(n.trim()||(n=this._deletedRulePlaceholder),!i.cssRules[e])return e;i.deleteRule(e);try{i.insertRule(n,e)}catch(r){t||console.warn("StyleSheet: illegal rule: \n\n"+n+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),i.insertRule(this._deletedRulePlaceholder,e)}}else{var s=this._tags[e];r(s,"old rule at index `"+e+"` not found"),s.textContent=n}return e},i.deleteRule=function(e){if(!this._isBrowser){this._serverSheet.deleteRule(e);return}if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];r(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},i.flush=function(){this._injected=!1,this._rulesCount=0,this._isBrowser?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},i.cssRules=function(){var e=this;return this._isBrowser?this._tags.reduce(function(t,n){return n?t=t.concat(Array.prototype.map.call(e.getSheetForTag(n).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[]):this._serverSheet.cssRules},i.makeStyleTag=function(e,t,i){t&&r(n(t),"makeStyleTag acceps only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var o=document.head||document.getElementsByTagName("head")[0];return i?o.insertBefore(s,i):o.appendChild(s),s},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function r(e,t){if(!e)throw Error("StyleSheet: "+t+".")}e.default=i}(u),function(e){e.__esModule=!0,e.default=void 0;var t=i(c),n=i(u);function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){function e(e){var t=void 0===e?{}:e,i=t.styleSheet,r=void 0===i?null:i,s=t.optimizeForSpeed,o=void 0!==s&&s,a=t.isBrowser,l=void 0===a?"undefined"!=typeof window:a;this._sheet=r||new n.default({name:"styled-jsx",optimizeForSpeed:o}),this._sheet.inject(),r&&"boolean"==typeof o&&(this._sheet.setOptimizeForSpeed(o),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._isBrowser=l,this._fromServer=void 0,this._indices={},this._instancesCounts={},this.computeId=this.createComputeId(),this.computeSelector=this.createComputeSelector()}var i=e.prototype;return i.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._isBrowser&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var n=this.getIdAndRules(e),i=n.styleId,r=n.rules;if(i in this._instancesCounts){this._instancesCounts[i]+=1;return}var s=r.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[i]=s,this._instancesCounts[i]=1},i.remove=function(e){var t=this,n=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var i=this._fromServer&&this._fromServer[n];i?(i.parentNode.removeChild(i),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},i.update=function(e,t){this.add(t),this.remove(e)},i.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={},this.computeId=this.createComputeId(),this.computeSelector=this.createComputeSelector()},i.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],n=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},i.createComputeId=function(){var e={};return function(n,i){if(!i)return"jsx-"+n;var r=String(i),s=n+r;return e[s]||(e[s]="jsx-"+(0,t.default)(n+"-"+r)),e[s]}},i.createComputeSelector=function(e){void 0===e&&(e=/__jsx-style-dynamic-selector/g);var t={};return function(n,i){this._isBrowser||(i=i.replace(/\/style/gi,"\\/style"));var r=n+i;return t[r]||(t[r]=i.replace(e,n)),t[r]}},i.getIdAndRules=function(e){var t=this,n=e.children,i=e.dynamic,r=e.id;if(i){var s=this.computeId(r,i);return{styleId:s,rules:Array.isArray(n)?n.map(function(e){return t.computeSelector(s,e)}):[this.computeSelector(s,n)]}}return{styleId:this.computeId(r),rules:Array.isArray(n)?n:[n]}},i.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}();e.default=r}(l),function(e){e.__esModule=!0,e.default=n,e.flush=function(){var e=t.cssRules();return t.flush(),e};var t=new(l&&l.__esModule?l:{default:l}).default;function n(e){return"undefined"==typeof window?t.add(e):(0,s.useLayoutEffect)(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}n.dynamic=function(e){return e.map(function(e){var n=e[0],i=e[1];return t.computeId(n,i)}).join(" ")}}(a);var h=a.default||a;h.flush=a.flush;var d={};d.__esModule=!0,d.default=function(e){return void 0===e&&(e={}),(0,r.flush)().map(function(t){var n=t[0],r=t[1];return i.default.createElement("style",{id:"__"+n,key:"__"+n,nonce:e.nonce?e.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},d.flushToHTML=function(e){return void 0===e&&(e={}),(0,r.flush)().reduce(function(t,n){var i=n[0],r=n[1];return t+('<style id="__'+i+'"'+(e.nonce?' nonce="'+e.nonce+'"':"")+">"+r)+"</style>"},"")},i=s&&s.__esModule?s:{default:s},(r=a.default||a).flush=a.flush;var p=d.default||d;p.flushToHTML=d.flushToHTML,t.Z=h},51834:function(e,t,n){"use strict";var i=n(33059);t.Z=i.ZP},33059:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m}});var i=n(87462),r=n(71002),s={sans:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',mono:"Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace",prism:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,"Liberation Mono", "Courier New", monospace'},o={xs:{min:"0",max:"650px"},sm:{min:"650px",max:"900px"},md:{min:"900px",max:"1280px"},lg:{min:"1280px",max:"1920px"},xl:{min:"1920px",max:"10000px"}},a={gap:"16pt",gapNegative:"-16pt",gapHalf:"8pt",gapHalfNegative:"-8pt",gapQuarter:"4pt",gapQuarterNegative:"-4pt",pageMargin:"16pt",pageWidth:"750pt",pageWidthWithMargin:"782pt",breakpointMobile:o.xs.max,breakpointTablet:o.sm.max,radius:"6px",unit:"16px"},l={type:"light",font:s,layout:a,palette:{accents_1:"#fafafa",accents_2:"#eaeaea",accents_3:"#999",accents_4:"#888",accents_5:"#666",accents_6:"#444",accents_7:"#333",accents_8:"#111",background:"#fff",foreground:"#000",selection:"#79ffe1",secondary:"#666",code:"#f81ce5",border:"#eaeaea",error:"#e00",errorLight:"#ff1a1a",errorLighter:"#f7d4d6",errorDark:"#c50000",success:"#0070f3",successLight:"#3291ff",successLighter:"#d3e5ff",successDark:"#0761d1",warning:"#f5a623",warningLight:"#f7b955",warningLighter:"#ffefcf",warningDark:"#ab570a",cyan:"#50e3c2",cyanLighter:"#aaffec",cyanLight:"#79ffe1",cyanDark:"#29bc9b",violet:"#7928ca",violetLighter:"#e3d7fc",violetLight:"#8a63d2",violetDark:"#4c2889",purple:"#f81ce5",alert:"#ff0080",magenta:"#eb367f",link:"#0070f3"},breakpoints:o,expressiveness:{linkStyle:"none",linkHoverStyle:"none",dropdownBoxShadow:"0 4px 4px 0 rgba(0, 0, 0, 0.02)",scrollerStart:"rgba(255, 255, 255, 1)",scrollerEnd:"rgba(255, 255, 255, 0)",shadowSmall:"0 5px 10px rgba(0, 0, 0, 0.12)",shadowMedium:"0 8px 30px rgba(0, 0, 0, 0.12)",shadowLarge:"0 30px 60px rgba(0, 0, 0, 0.12)",portalOpacity:.25}},c={type:"dark",font:s,layout:a,palette:{accents_1:"#111",accents_2:"#333",accents_3:"#444",accents_4:"#666",accents_5:"#888",accents_6:"#999",accents_7:"#eaeaea",accents_8:"#fafafa",background:"#000",foreground:"#fff",selection:"#f81ce5",secondary:"#888",code:"#79ffe1",border:"#333",error:"#e00",errorLighter:"#f7d4d6",errorLight:"#ff1a1a",errorDark:"#c50000",success:"#0070f3",successLighter:"#d3e5ff",successLight:"#3291ff",successDark:"#0761d1",warning:"#f5a623",warningLighter:"#ffefcf",warningLight:"#f7b955",warningDark:"#ab570a",cyan:"#50e3c2",cyanLighter:"#aaffec",cyanLight:"#79ffe1",cyanDark:"#29bc9b",violet:"#7928ca",violetLighter:"#e3d7fc",violetLight:"#8a63d2",violetDark:"#4c2889",purple:"#f81ce5",alert:"#ff0080",magenta:"#eb367f",link:"#3291ff"},breakpoints:o,expressiveness:{linkStyle:"none",linkHoverStyle:"none",dropdownBoxShadow:"0 0 0 1px #333",scrollerStart:"rgba(255, 255, 255, 1)",scrollerEnd:"rgba(255, 255, 255, 0)",shadowSmall:"0 0 0 1px #333",shadowMedium:"0 0 0 1px #333",shadowLarge:"0 0 0 1px #333",portalOpacity:.75}},u=function(e){return e&&"object"===(0,r.Z)(e)},h=function e(t,n){if(!u(n)||!u(t))return t;for(var r=Object.keys(t),s={},o=0;o<r.length;o++){var a=r[o],l=t[a],c=n[a];Array.isArray(l)&&Array.isArray(c)?s[a]=c.concat(l):u(l)&&u(c)?s[a]=e(l,(0,i.Z)({},c)):c?s[a]=c:s[a]=l}return s},d=function(){return[l,c]},p=function(e){return!!e&&!d().find(function(t){return t.type===e})},f=function(e,t){if(!p(t.type))throw Error("Duplicate or unavailable theme type");return h(e,t)},m={isPresetTheme:function(e){return!!e&&!p("string"==typeof e?e:e.type)},isAvailableThemeType:p,hasUserCustomTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!e.find(function(e){return p(e.type)})},getPresets:d,getPresetStaticTheme:function(){return l},create:f,createFromDark:function(e){return f(c,e)},createFromLight:function(e){return f(l,e)}}},95073:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(71002),r=function(e){for(var t=Object.keys(e),n=t.length,i="",r=0;r<n;r++){var s=t[r];e[t[r]]&&(i=i?"".concat(i," ").concat(String(s)):String(s))}return i},s=function(){var e=arguments.length,t="";if(0===e)return t;for(var n=0;n<e;n++){var s=n<0||arguments.length<=n?void 0:arguments[n];s&&("object"!==(0,i.Z)(s)||Array.isArray(s)?t+=" ".concat(String(s).trim()):t+=" ".concat(r(s)))}return t.trim()}},31236:function(e,t,n){"use strict";var i=n(77749);t.ZP=i.TT},77749:function(e,t,n){"use strict";n.d(t,{SY:function(){return o},TT:function(){return a},pP:function(){return r}});var i=n(67294),r=["width","height","padding","margin","w","h","paddingLeft","paddingRight","paddingTop","paddingBottom","pl","pr","pt","pb","marginLeft","marginRight","marginTop","marginBottom","ml","mr","mt","mb","px","py","mx","my","font","unit","scale"],s=function(e){return"".concat(e)},o=i.createContext({getScaleProps:function(){},getAllScaleProps:function(){return{}},SCALES:{pl:s,pr:s,pb:s,pt:s,px:s,py:s,mb:s,ml:s,mr:s,mt:s,mx:s,my:s,width:s,height:s,font:s},unit:"16px"}),a=function(){return i.useContext(o)}},70314:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(87462),r=n(91),s=n(67294),o=n(77749),a=n(83937),l=n(6761);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,void 0)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var h=["children"],d=["paddingLeft","pl","paddingRight","pr","paddingTop","pt","paddingBottom","pb","marginTop","mt","marginRight","mr","marginBottom","mb","marginLeft","ml","px","py","mx","my","width","height","font","w","h","margin","padding","unit","scale"],p=function(e){if(1===e)return e;var t=Math.abs((e-1)/2);return e>1?1+t:1-t},f=function(e){var t=(0,s.forwardRef)(function(t,n){var u,f,m,g,_,v,y,w,b,I,C,T,k,E,S,P,R,N,x,A,O,D,L,M,F,U,j,q,z,W,V,B,H=t.children,$=(0,r.Z)(t,h),G=(0,a.Z)().layout,K=$.paddingLeft,Z=$.pl,Y=$.paddingRight,J=$.pr,Q=$.paddingTop,X=$.pt,ee=$.paddingBottom,et=$.pb,en=$.marginTop,ei=$.mt,er=$.marginRight,es=$.mr,eo=$.marginBottom,ea=$.mb,el=$.marginLeft,ec=$.ml,eu=$.px,eh=$.py,ed=$.mx,ep=$.my,ef=$.width,em=$.height,eg=$.font,e_=$.w,ev=$.h,ey=$.margin,ew=$.padding,eb=$.unit,eI=void 0===eb?G.unit:eb,eC=$.scale,eT=void 0===eC?1:eC,ek=(0,r.Z)($,d),eE=function(e){return function(t,n){0===t&&(t=1,n=n||0);var i=p(eT)*t;if(void 0===e)return void 0!==n?"".concat(n):"calc(".concat(i," * ").concat(eI,")");if(!(0,l.Yr)(e))return"".concat(e);var r=i*Number(e);return"calc(".concat(r," * ").concat(eI,")")}},eS={unit:eI,SCALES:{pt:eE(null!==(u=null!==(f=null!=Q?Q:X)&&void 0!==f?f:eh)&&void 0!==u?u:ew),pr:eE(null!==(m=null!==(g=null!=Y?Y:J)&&void 0!==g?g:eu)&&void 0!==m?m:ew),pb:eE(null!==(_=null!==(v=null!=ee?ee:et)&&void 0!==v?v:eh)&&void 0!==_?_:ew),pl:eE(null!==(y=null!==(w=null!=K?K:Z)&&void 0!==w?w:eu)&&void 0!==y?y:ew),px:eE(null!==(b=null!==(I=null!==(C=null!==(T=null!=eu?eu:K)&&void 0!==T?T:Y)&&void 0!==C?C:Z)&&void 0!==I?I:J)&&void 0!==b?b:ew),py:eE(null!==(k=null!==(E=null!==(S=null!==(P=null!=eh?eh:Q)&&void 0!==P?P:ee)&&void 0!==S?S:X)&&void 0!==E?E:et)&&void 0!==k?k:ew),mt:eE(null!==(R=null!==(N=null!=en?en:ei)&&void 0!==N?N:ep)&&void 0!==R?R:ey),mr:eE(null!==(x=null!==(A=null!=er?er:es)&&void 0!==A?A:ed)&&void 0!==x?x:ey),mb:eE(null!==(O=null!==(D=null!=eo?eo:ea)&&void 0!==D?D:ep)&&void 0!==O?O:ey),ml:eE(null!==(L=null!==(M=null!=el?el:ec)&&void 0!==M?M:ed)&&void 0!==L?L:ey),mx:eE(null!==(F=null!==(U=null!==(j=null!==(q=null!=ed?ed:el)&&void 0!==q?q:er)&&void 0!==j?j:ec)&&void 0!==U?U:es)&&void 0!==F?F:ey),my:eE(null!==(z=null!==(W=null!==(V=null!==(B=null!=ep?ep:en)&&void 0!==B?B:eo)&&void 0!==V?V:ei)&&void 0!==W?W:ea)&&void 0!==z?z:ey),width:eE(null!=ef?ef:e_),height:eE(null!=em?em:ev),font:eE(eg)},getScaleProps:function(e){if(!Array.isArray(e))return $[e];var t,n=void 0,i=c(e);try{for(i.s();!(t=i.n()).done;){var r=$[t.value];void 0!==r&&(n=r)}}catch(e){i.e(e)}finally{i.f()}return n},getAllScaleProps:function(){var e,t={},n=c(o.pP);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=$[i];void 0!==r&&(t[i]=r)}}catch(e){n.e(e)}finally{n.f()}return t}};return s.createElement(o.SY.Provider,{value:eS},s.createElement(e,(0,i.Z)({},ek,{ref:n}),H))});return t.displayName="Scale".concat(e.displayName||"Wrapper"),t}},83937:function(e,t,n){"use strict";var i=n(41785);t.Z=i.F},41785:function(e,t,n){"use strict";n.d(t,{F:function(){return o},N:function(){return s}});var i=n(67294),r=n(51834).Z.getPresetStaticTheme(),s=i.createContext(r),o=function(){return i.useContext(s)}},6761:function(e,t,n){"use strict";n.d(t,{CV:function(){return l},Tv:function(){return c},V5:function(){return h},Yr:function(){return d},bJ:function(){return s},jG:function(){return a},jU:function(){return u},xC:function(){return o},zv:function(){return r}});var i=n(67294),r=function(){return Math.random().toString(32).slice(2,10)},s=function(e,t){return(i.Children.map(e,function(e){return i.isValidElement(e)?e.type:null})||[]).includes(t)},o=function(e,t){var n=[];return[i.Children.map(e,function(e){return i.isValidElement(e)&&e.type===t?(n.push(e),null):e}),n.length>=0?n:void 0]},a=function(e,t,n){var r=[],s=Array.isArray(n);return[i.Children.map(e,function(e){return i.isValidElement(e)?e.props?s?n.includes(e.props[t])?(r.push(e),null):e:e.props[t]===n?(r.push(e),null):e:e:null}),r.length>=0?r:void 0]},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===i.Children.count(e))return[];var n=0===t.length,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.cloneElement(e,t)},s=0;return i.Children.map(e,function(e){return i.isValidElement(e)?(s+=1,n||t.find(function(t){return t===e.type}))?r(e,{index:s}):(s-=1,e):e})},c=function(e,t){if(!e||!t)return!1;for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1},u=function(){return!!("undefined"!=typeof window&&window.document&&window.document.createElement)},h=function(){return!!u()&&navigator.platform.toUpperCase().indexOf("MAC")>=0},d=function(e){return void 0!==e&&!Number.isNaN(+e)}},5350:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var i=n(86854),r=function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return"".concat(t).concat(t).concat(n).concat(n).concat(i).concat(i)}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!n)throw Error("Geist UI: Unsupported ".concat(e," color."));return[Number.parseInt(n[1],16),Number.parseInt(n[2],16),Number.parseInt(n[3],16)]},s=function(e){if("#"===e.charAt(0))return r(e);var t=e.replace(/ /g,""),n=e.substr(0,4),i=t.match(/\((.+)\)/);if(!n.startsWith("rgb")||!i)throw console.log(e),Error('Geist UI: Only support ["RGB", "RGBA", "HEX"] color.');return i[1].split(",").map(function(e){return Number.parseFloat(e)})},o=function(e,t){if(!/^#|rgb|RGB/.test(e))return e;var n=s(e),r=(0,i.Z)(n,3),o=r[0],a=r[1],l=r[2];return"rgba(".concat(o,", ").concat(a,", ").concat(l,", ").concat(t>1?1:t<0?0:t,")")}},45970:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t};i("default","secondary","success","warning","error","abort","secondary-light","success-light","warning-light","error-light"),i("default","secondary","success","warning","error"),i("default","secondary","success","warning","error","dark","lite"),i("default","secondary","success","warning","error","dark","lite","alert","purple","violet","cyan"),i("default","silent","prevent"),i("hover","click"),i("top","topStart","topEnd","left","leftStart","leftEnd","bottom","bottomStart","bottomEnd","right","rightStart","rightEnd"),i("start","center","end","left","right")},20732:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(86854),r=n(67294),s=function(e){var t=(0,r.useState)(function(){return"function"==typeof e?e():e}),n=(0,i.Z)(t,2),s=n[0],o=n[1],a=(0,r.useRef)(e);return(0,r.useEffect)(function(){a.current=s},[s]),[s,function(e){var t="function"==typeof e?e(a.current):e;a.current=t,o(t)},a]}},32047:function(e,t,n){"use strict";n.d(t,{TP:function(){return r},b2:function(){return s},kW:function(){return o}});var i=n(67294),r={padding:"12px 16px",margin:"8px 0",width:"420px",maxWidth:"90vw",maxHeight:"75px",placement:"bottomRight"},s=i.createContext({toasts:[],toastLayout:r,updateToastLayout:function(e){return e},updateToasts:function(e){return e},lastUpdateToastId:null,updateLastToastId:function(){return null}}),o=function(){return i.useContext(s)}},9950:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(86854),r=n(67294),s=n(6761),o=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],o=t[1];return(0,r.useEffect)(function(){o((0,s.jU)())},[]),{isBrowser:n,isServer:!n}},a=function(e){var t=document.createElement("div");return t.setAttribute("id",e),t},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.zv)(),t=arguments.length>1?arguments[1]:void 0,n="geist-ui-".concat(e),l=o().isBrowser,c=(0,r.useState)(l?a(n):null),u=(0,i.Z)(c,2),h=u[0],d=u[1];return(0,r.useEffect)(function(){var e=(t?t():null)||document.body,i=e.querySelector("#".concat(n)),r=i||a(n);i||e.appendChild(r),d(r)},[]),h}},83454:function(e,t,n){"use strict";var i,r;e.exports=(null==(i=n.g.process)?void 0:i.env)&&"object"==typeof(null==(r=n.g.process)?void 0:r.env)?n.g.process:n(77663)},91118:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(63686)}])},25103:function(e,t,n){"use strict";n.d(t,{H:function(){return a},a:function(){return l}});var i=n(85893),r=n(67294),s=n(65981);let o=(0,r.createContext)(),a=e=>{let{children:t}=e,[n,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0),d=(0,r.useCallback)(async e=>{let t=await fetch("".concat("https://api.iconbuddy.app","/getUser"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e.uid,email:e.email})}),n=await t.json();n&&c(n),h(!1)},[]),p=(0,r.useCallback)(()=>{n&&d(n)},[n,d]);return(0,r.useEffect)(()=>{let e=s.Z.auth().onAuthStateChanged(async e=>{e?(a(e.toJSON()),await d(e)):(a(null),h(!1))});return()=>e()},[d]),(0,i.jsx)(o.Provider,{value:{user:n,loading:u,userObj:l,refreshUserData:p},children:t})},l=()=>(0,r.useContext)(o)},65981:function(e,t,n){"use strict";let i,r,s,o,a,l,c,u,h,d,p,f,m,g;n.d(t,{Z:function(){return u5}});var _,v,y,w,b,I,C={};n.r(C),n.d(C,{FirebaseError:function(){return Q},SDK_VERSION:function(){return ts},_DEFAULT_ENTRY_NAME:function(){return eX},_addComponent:function(){return e5},_addOrOverwriteComponent:function(){return e4},_apps:function(){return e1},_clearComponents:function(){return tt},_components:function(){return e3},_getProvider:function(){return e8},_isFirebaseApp:function(){return e9},_isFirebaseServerApp:function(){return te},_registerComponent:function(){return e6},_removeServiceInstance:function(){return e7},_serverApps:function(){return e2},deleteApp:function(){return tu},getApp:function(){return tl},getApps:function(){return tc},initializeApp:function(){return to},initializeServerApp:function(){return ta},onLog:function(){return td},registerVersion:function(){return th},setLogLevel:function(){return tp}});var T=n(83454);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},E=function(e,t){if(!e)throw S(t)},S=function(e){return Error("Firebase Database ("+k.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},P=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:((64512&r)==55296&&i+1<e.length&&(64512&e.charCodeAt(i+1))==56320?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128)}return t},R=function(e){let t=[],n=0,i=0;for(;n<e.length;){let r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){let s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{let s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){let r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=r>>2,u=(3&r)<<4|o>>4,h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):R(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){let r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0,o=++t<e.length?n[e.charAt(t)]:64,a=++t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw new x;let l=r<<2|s>>4;if(i.push(l),64!==o){let e=s<<4&240|o>>2;if(i.push(e),64!==a){let e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class x extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let A=function(e){let t=P(e);return N.encodeByteArray(t,!0)},O=function(e){return A(e).replace(/\./g,"")},D=function(e){try{return N.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function L(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=L(e[n],t[n]));return e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,F=()=>{if(void 0===T||void 0===T.env)return;let e=T.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},U=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&D(e[1]);return t&&JSON.parse(t)},j=()=>{try{return M()||F()||U()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},q=()=>{var e;return null===(e=j())||void 0===e?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function V(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(W())}function B(){var e;let t=null===(e=j())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function H(){return"undefined"!=typeof window||$()}function $(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function G(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function K(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Z(){let e=W();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Y(){return!0===k.NODE_CLIENT||!0===k.NODE_ADMIN}function J(){try{return"object"==typeof indexedDB}catch(e){return!1}}class Q extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,X.prototype.create)}}class X{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?r.replace(ee,(e,t)=>{let i=n[t];return null!=i?String(i):`<${t}?>`}):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Q(i,o,n)}}let ee=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(e){return JSON.parse(e)}function en(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=function(e){let t={},n={},i={},r="";try{let s=e.split(".");t=et(D(s[0])||""),n=et(D(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:i,signature:r}},er=function(e){let t=ei(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},es=function(e){let t=ei(e).claims;return"object"==typeof t&&!0===t.admin};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ea(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function el(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ec(e,t,n){let i={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function eu(e,t){if(e===t)return!0;let n=Object.keys(e),i=Object.keys(t);for(let r of n){if(!i.includes(r))return!1;let n=e[r],s=t[r];if(eh(n)&&eh(s)){if(!eu(n,s))return!1}else if(n!==s)return!1}for(let e of i)if(!n.includes(e))return!1;return!0}function eh(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(e){let t=[];for(let[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ep(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function ef(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){let n,i;t||(t=0);let r=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=(t<<1|t>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=l^o&(a^l),i=1518500249):(n=o^a^l,i=1859775393):e<60?(n=o&a|l&(o|a),i=2400959708):(n=o^a^l,i=3395469782);let t=(s<<5|s>>>27)+n+c+i+r[e]&4294967295;c=l,l=a,a=(o<<30|o>>>2)&4294967295,o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);let n=t-this.blockSize,i=0,r=this.buf_,s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){let e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let i=24;i>=0;i-=8)e[n]=this.chain_[t]>>i&255,++n;return e}}function eg(e,t){let n=new e_(e,t);return n.subscribe.bind(n)}class e_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(i=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(i.next=ev),void 0===i.error&&(i.error=ev),void 0===i.complete&&(i.complete=ev);let r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ev(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ey=function(e,t,n,i){let r;if(i<t?r="at least "+t:i>n&&(r=0===n?"none":"no more than "+n),r)throw Error(e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")};function ew(e,t){return`${e} failed: ${t} argument `}function eb(e,t,n,i){if((!i||n)&&"function"!=typeof n)throw Error(ew(e,t)+"must be a valid function.")}function eI(e,t,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw Error(ew(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eC=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){let t=r-55296;E(++i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return t},eT=function(e){let t=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(e){return e&&e._delegate?e._delegate:e}class eE{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eS="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new z;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:eS})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=eS){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=eS){return this.instances.has(e)}getOptions(e=eS){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;let i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);let s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e===eS?void 0:e,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=eS){return this.component?this.component.multipleInstances?e:eS:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new eP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eN=[];(_=b||(b={}))[_.DEBUG=0]="DEBUG",_[_.VERBOSE=1]="VERBOSE",_[_.INFO=2]="INFO",_[_.WARN=3]="WARN",_[_.ERROR=4]="ERROR",_[_.SILENT=5]="SILENT";let ex={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},eA=b.INFO,eO={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},eD=(e,t,...n)=>{if(t<e.logLevel)return;let i=new Date().toISOString(),r=eO[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class eL{constructor(e){this.name=e,this._logLevel=eA,this._logHandler=eD,this._userLogHandler=null,eN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in b))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ex[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...e),this._logHandler(this,b.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...e),this._logHandler(this,b.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,b.INFO,...e),this._logHandler(this,b.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,b.WARN,...e),this._logHandler(this,b.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,b.ERROR,...e),this._logHandler(this,b.ERROR,...e)}}let eM=(e,t)=>t.some(t=>e instanceof t),eF=new WeakMap,eU=new WeakMap,ej=new WeakMap,eq=new WeakMap,ez=new WeakMap,eW={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return eU.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ej.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return eV(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function eV(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(eV(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&eF.set(t,e)}).catch(()=>{}),ez.set(t,e),t}(e);if(eq.has(e))return eq.get(e);let n="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(eB(this),e),eV(eF.get(this))}:function(...e){return eV(t.apply(eB(this),e))}:function(e,...n){let i=t.call(eB(this),e,...n);return ej.set(i,e.sort?e.sort():[e]),eV(i)}:(t instanceof IDBTransaction&&function(e){if(eU.has(e))return;let t=new Promise((t,n)=>{let i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});eU.set(e,t)}(t),eM(t,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,eW):t;return n!==e&&(eq.set(e,n),ez.set(n,e)),n}let eB=e=>ez.get(e),eH=["get","getKey","getAll","getAllKeys","count"],e$=["put","add","delete","clear"],eG=new Map;function eK(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(eG.get(t))return eG.get(t);let n=t.replace(/FromIndex$/,""),i=t!==n,r=e$.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||eH.includes(n)))return;let s=async function(e,...t){let s=this.transaction(e,r?"readwrite":"readonly"),o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return eG.set(t,s),s}eW={...g=eW,get:(e,t,n)=>eK(e,t)||g.get(e,t,n),has:(e,t)=>!!eK(e,t)||g.has(e,t)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let eY="@firebase/app",eJ="0.10.6",eQ=new eL("@firebase/app"),eX="[DEFAULT]",e0={[eY]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},e1=new Map,e2=new Map,e3=new Map;function e5(e,t){try{e.container.addComponent(t)}catch(n){eQ.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function e4(e,t){e.container.addOrOverwriteComponent(t)}function e6(e){let t=e.name;if(e3.has(t))return eQ.debug(`There were multiple attempts to register component ${t}.`),!1;for(let n of(e3.set(t,e),e1.values()))e5(n,e);for(let t of e2.values())e5(t,e);return!0}function e8(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function e7(e,t,n=eX){e8(e,t).clearInstance(n)}function e9(e){return void 0!==e.options}function te(e){return void 0!==e.settings}function tt(){e3.clear()}let tn=new X("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new eE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends ti{constructor(e,t,n,i){let r=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:r};void 0!==e.apiKey?super(e,s,i):super(e.options,s,i),this._serverConfig=Object.assign({automaticDataCollectionEnabled:r},t),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,th(eY,eJ,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tu(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw tn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ts="10.12.3";function to(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});let i=Object.assign({name:eX,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw tn.create("bad-app-name",{appName:String(r)});if(n||(n=q()),!n)throw tn.create("no-options");let s=e1.get(r);if(s){if(eu(n,s.options)&&eu(i,s.config))return s;throw tn.create("duplicate-app",{appName:r})}let o=new eR(r);for(let e of e3.values())o.addComponent(e);let a=new ti(n,i,o);return e1.set(r,a),a}function ta(e,t){let n;if(H()&&!$())throw tn.create("invalid-server-app-environment");void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=e9(e)?e.options:e;let i=Object.assign(Object.assign({},t),n);if(void 0!==i.releaseOnDeref&&delete i.releaseOnDeref,void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw tn.create("finalization-registry-not-supported",{});let r=""+[...JSON.stringify(i)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),s=e2.get(r);if(s)return s.incRefCount(t.releaseOnDeref),s;let o=new eR(r);for(let e of e3.values())o.addComponent(e);let a=new tr(n,t,r,o);return e2.set(r,a),a}function tl(e=eX){let t=e1.get(e);if(!t&&e===eX&&q())return to();if(!t)throw tn.create("no-app",{appName:e});return t}function tc(){return Array.from(e1.values())}async function tu(e){let t=!1,n=e.name;e1.has(n)?(t=!0,e1.delete(n)):e2.has(n)&&0>=e.decRefCount()&&(e2.delete(n),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function th(e,t,n){var i;let r=null!==(i=e0[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let e=[`Unable to register library "${r}" with version "${t}":`];s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eQ.warn(e.join(" "));return}e6(new eE(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function td(e,t){if(null!==e&&"function"!=typeof e)throw tn.create("invalid-log-argument");!function(e,t){for(let n of eN){let i=null;t&&t.level&&(i=ex[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=(t,n,...r)=>{let s=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:b[n].toLowerCase(),message:s,args:r,type:t.name})}}}(e,t)}function tp(e){eN.forEach(t=>{t.setLogLevel(e)})}let tf="firebase-heartbeat-store",tm=null;function tg(){return tm||(tm=(function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(e,1),a=eV(o);return i&&o.addEventListener("upgradeneeded",e=>{i(eV(o.result),e.oldVersion,e.newVersion,eV(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(tf)}catch(e){console.warn(e)}}}).catch(e=>{throw tn.create("idb-open",{originalErrorMessage:e.message})})),tm}async function t_(e){try{let t=(await tg()).transaction(tf),n=await t.objectStore(tf).get(ty(e));return await t.done,n}catch(e){if(e instanceof Q)eQ.warn(e.message);else{let t=tn.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});eQ.warn(t.message)}}}async function tv(e,t){try{let n=(await tg()).transaction(tf,"readwrite"),i=n.objectStore(tf);await i.put(t,ty(e)),await n.done}catch(e){if(e instanceof Q)eQ.warn(e.message);else{let t=tn.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});eQ.warn(t.message)}}}function ty(e){return`${e.name}!${e.options.appId}`}class tw{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new tI(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tb();return(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null)?void 0:this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=tb(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){let n=[],i=e.slice();for(let r of e){let e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),tC(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tC(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=O(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function tb(){return new Date().toISOString().substring(0,10)}class tI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!J()&&new Promise((e,t)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await t_(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let n=await this.read();return tv(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let n=await this.read();return tv(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function tC(e){return O(JSON.stringify({version:2,heartbeats:e})).length}e6(new eE("platform-logger",e=>new eZ(e),"PRIVATE")),e6(new eE("heartbeat",e=>new tw(e),"PRIVATE")),th(eY,eJ,""),th(eY,eJ,"esm2017"),th("fire-js","");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t){this._delegate=e,this.firebase=t,e5(e,new eE("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tu(this._delegate)))}_getService(e,t=eX){var n;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return i.isInitialized()||(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=eX){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){e5(this._delegate,e)}_addOrOverwriteComponent(e){e4(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}let tk=new X("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),tE=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e(){let t=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t={},n={__esModule:!0,initializeApp:function(i,r={}){let s=to(i,r);if(eo(t,s.name))return t[s.name];let o=new e(s,n);return t[s.name]=o,o},app:i,registerVersion:th,setLogLevel:tp,onLog:td,apps:null,SDK_VERSION:ts,INTERNAL:{registerComponent:function(t){let r=t.name,s=r.replace("-compat","");if(e6(t)&&"PUBLIC"===t.type){let o=(e=i())=>{if("function"!=typeof e[s])throw tk.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&L(o,t.serviceProps),n[s]=o,e.prototype[s]=function(...e){return this._getService.bind(this,r).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:C}};function i(e){if(!eo(t,e=e||eX))throw tk.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(tT);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){L(t,e)},createSubscribe:eg,ErrorFactory:X,deepExtend:L}),t}(),tS=new eL("@firebase/app-compat");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(H()&&void 0!==self.firebase){tS.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&tS.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}th("@firebase/app-compat","0.2.36",void 0),/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tE.registerVersion("firebase","10.12.3","app-compat");var tP=n(83454);let tR="@firebase/database",tN="1.0.6",tx="";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),en(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:et(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return eo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tD=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tA(t)}}catch(e){}return new tO},tL=tD("localStorage"),tM=tD("sessionStorage"),tF=new eL("@firebase/database"),tU=(m=1,function(){return m++}),tj=function(e){let t=eC(e),n=new em;n.update(t);let i=n.digest();return N.encodeByteArray(i)},tq=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=tq.apply(null,i):"object"==typeof i?t+=en(i):t+=i,t+=" "}return t},tz=null,tW=!0,tV=function(e,t){E(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(tF.logLevel=b.VERBOSE,tz=tF.log.bind(tF),t&&tM.set("logging_enabled",!0)):"function"==typeof e?tz=e:(tz=null,tM.remove("logging_enabled"))},tB=function(...e){if(!0===tW&&(tW=!1,null===tz&&!0===tM.get("logging_enabled")&&tV(!0)),tz){let t=tq.apply(null,e);tz(t)}},tH=function(e){return function(...t){tB(e,...t)}},t$=function(...e){let t="FIREBASE INTERNAL ERROR: "+tq(...e);tF.error(t)},tG=function(...e){let t=`FIREBASE FATAL ERROR: ${tq(...e)}`;throw tF.error(t),Error(t)},tK=function(...e){let t="FIREBASE WARNING: "+tq(...e);tF.warn(t)},tZ=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tK("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tY=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},tJ=function(e){if(Y()||"complete"===document.readyState)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},tQ="[MIN_NAME]",tX="[MAX_NAME]",t0=function(e,t){if(e===t)return 0;if(e===tQ||t===tX)return -1;if(t===tQ||e===tX)return 1;{let n=t7(e),i=t7(t);return null!==n?null!==i?n-i==0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},t1=function(e,t){return e===t?0:e<t?-1:1},t2=function(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+en(t))},t3=function(e){if("object"!=typeof e||null===e)return en(e);let t=[];for(let n in e)t.push(n);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=en(t[i])+":"+t3(e[t[i]]);return n+"}"},t5=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function t4(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}let t6=function(e){let t,n,i,r,s;E(!tY(e),"Invalid JSON number"),0===e?(n=0,i=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=22250738585072014e-324?(n=(r=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,i=Math.round(e*Math.pow(2,52-r)-4503599627370496)):(n=0,i=Math.round(e/5e-324)));let o=[];for(s=52;s;s-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();let a=o.join(""),l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},t8=RegExp("^-?(0*)\\d{1,10}$"),t7=function(e){if(t8.test(e)){let t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},t9=function(e){try{e()}catch(e){setTimeout(()=>{throw tK("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ne=function(e,t){let n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){tK(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(tB("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tK(e)}}class ni{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ni.OWNER="owner";let nr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ns="websocket",no="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t,n,i,r=!1,s="",o=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tL.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&tL.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function nl(e,t,n){let i;if(E("string"==typeof t,"typeof type must == string"),E("object"==typeof n,"typeof params must == object"),t===ns)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===no)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw Error("Unknown connection type: "+t);(e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=e.namespace);let r=[];return t4(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.counters_={}}incrementCounter(e,t=1){eo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return L(void 0,this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu={},nh={};function nd(e){let t=e.toString();return nu[t]||(nu[t]=new nc),nu[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&t9(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf="start";class nm{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tH(e),this.stats_=nd(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),nl(t,no,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new np(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),tJ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ng((...e)=>{let[t,n,i,r,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder){if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===nf)this.id=n,this.password=i;else if("close"===t)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error("Unrecognized command received: "+t)}},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[nf]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&nr.test(location.hostname)&&(e.r="f");let t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nm.forceAllow_=!0}static forceDisallow(){nm.forceDisallow_=!0}static isAvailable(){return!Y()&&(!!nm.forceAllow_||!nm.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=t5(A(t),1840);for(let e=0;e<n.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Y())return;this.myDisconnFrame=document.createElement("iframe");let n={};n.dframe="t",n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=en(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ng{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Y())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=tU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ng.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";</script>');let i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(e){tB("frame writing exception"),e.stack&&tB(e.stack),tB(e)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||tB("No IE domain setting required")}catch(n){let t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;{this.currentSerial++;let e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;)if(this.pendingSegs[0].d.length+30+n.length<=1870){let e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}else break;return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){Y()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{tB("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}},Math.floor(1))}}let n_=null;"undefined"!=typeof MozWebSocket?n_=MozWebSocket:"undefined"!=typeof WebSocket&&(n_=WebSocket);class nv{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tH(this.connId),this.stats_=nd(t),this.connURL=nv.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){let s={};return s.v="5",!Y()&&"undefined"!=typeof location&&location.hostname&&nr.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s.ac=i),r&&(s.p=r),nl(e,ns,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tL.set("previous_websocket_failure",!0);try{let e;if(Y()){let t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/5/${tx}/${tP.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);let n=tP.env,i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new n_(this.connURL,[],e)}catch(t){this.log_("Error instantiating WebSocket.");let e=t.message||t.data;e&&this.log_(e),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){nv.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){let t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&t.length>1&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==n_&&!nv.forceDisallow_}static previouslyFailed(){return tL.isInMemoryStorage||!0===tL.get("previous_websocket_failure")}markConnectionHealthy(){tL.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join("");this.frames=null;let t=et(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(E(null===this.frames,"We already have a frame buffer"),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=t5(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nv.responsesRequiredToBeHealthy=2,nv.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nm,nv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let t=nv&&nv.isAvailable(),n=t&&!nv.previouslyFailed();if(e.webSocketOnly&&(t||tK("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[nv];else{let e=this.transports_=[];for(let t of ny.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ny.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ny.globalTransportInitialized_=!1;class nw{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tH("c:"+this.id+":"),this.transportManager_=new ny(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ne(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){let t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=t2("t",e),n=t2("d",e);if("c"===t)this.onSecondaryControl_(n);else if("d"===t)this.pendingDataMessages.push(n);else throw Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=t2("t",e),n=t2("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=t2("t",e);if("d"in e){let n=e.d;if("h"===t){let e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?t$("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):t$("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&tK("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),ne(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ne(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tL.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let e=0;e<i.length;e++)if(i[e].callback===t&&(!n||n===i[e].context)){i.splice(e,1);return}}validateEventType_(e){E(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends nI{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||V()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nC}getInitialEvent(e){return E("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class nT{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function nk(){return new nT("")}function nE(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function nS(e){return e.pieces_.length-e.pieceNum_}function nP(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new nT(e.pieces_,t)}function nR(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function nN(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function nx(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new nT(t,0)}function nA(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof nT)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new nT(n,0)}function nO(e){return e.pieceNum_>=e.pieces_.length}function nD(e,t){let n=nE(e),i=nE(t);if(null===n)return t;if(n===i)return nD(nP(e),nP(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function nL(e,t){let n=nN(e,0),i=nN(t,0);for(let e=0;e<n.length&&e<i.length;e++){let t=t0(n[e],i[e]);if(0!==t)return t}return n.length===i.length?0:n.length<i.length?-1:1}function nM(e,t){if(nS(e)!==nS(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function nF(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(nS(e)>nS(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class nU{constructor(e,t){this.errorPrefix_=t,this.parts_=nN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=eT(this.parts_[e]);nj(this)}}function nj(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nq(e))}function nq(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz extends nI{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new nz}getInitialEvent(e){return E("visible"===e,"Unknown event type: "+e),[this.visible_]}}class nW extends nb{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=nW.nextPersistentConnectionId_++,this.log_=tH("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Y())throw Error("Auth override specified in options, but not supported on non Node.js platforms");nz.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&nC.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){let i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(en(r)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();let t=new z,n={p:e._path.toString(),q:e._queryObject};this.outstandingGets_.push({action:"g",request:n,onComplete:e=>{let n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}}),this.outstandingGetCount_++;let i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();let r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");let o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){let t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);let r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{let s=r.d,o=r.s;nW.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&eo(e,"w")){let n=ea(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){let e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();tK(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||es(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=er(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),E(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);let r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){let r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();let s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){let t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+en(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if("error"in e)throw"A server-side error has occurred: "+e.error;else"a"in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):t$("Unrecognized action received from server: "+en(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){!e||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+nW.nextConnectionId_++,r=this.lastSessionId,s=!1,o=null,a=function(){o?o.close():(s=!0,n())};this.realtime_={close:a,sendRequest:function(e){E(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[a,c]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?tB("getToken() completed but was canceled"):(tB("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,o=new nw(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{tK(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&tK(e),a())}}}interrupt(e){tB("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){tB("Resuming connection for reason: "+e),delete this.interruptReasons_[e],el(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>t3(e)).join("$"):"default";let i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){let n;let i=new nT(e).toString();if(this.listens.has(i)){let e=this.listens.get(i);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(i)}else n=void 0;return n}onAuthRevoked_(e,t){tB("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){tB("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){for(let e of(this.tryAuth(),this.tryAppCheck(),this.listens.values()))for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t="js";Y()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+tx.replace(/\./g,"-")]=1,V()?e["framework.cordova"]=1:K()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=nC.getInstance().currentlyOnline();return el(this.interruptReasons_)&&e}}nW.nextPersistentConnectionId_=0,nW.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nV(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new nV(tQ,e),i=new nV(tQ,t);return 0!==this.compare(n,i)}minPost(){return nV.MIN}}class nH extends nB{static get __EMPTY_NODE(){return s}static set __EMPTY_NODE(e){s=e}compare(e,t){return t0(e.name,t.name)}isDefinedOn(e){throw S("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nV.MIN}maxPost(){return new nV(tX,s)}makePost(e,t){return E("string"==typeof e,"KeyIndex indexValue must always be a string."),new nV(e,s)}toString(){return".key"}}let n$=new nH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e,t,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else if(0===s){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){let e;if(0===this.nodeStack_.length)return null;let t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nK{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:nK.RED,this.left=null!=i?i:nY.EMPTY_NODE,this.right=null!=r?r:nY.EMPTY_NODE}copy(e,t,n,i,r){return new nK(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this,r=n(e,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()}removeMin_(){if(this.left.isEmpty())return nY.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}remove(e,t){let n,i;if(n=this,0>t(e,n.key))n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return nY.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,nK.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,nK.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){return Math.pow(2,this.check_())<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e===this.right.check_())return e+(this.isRed_()?0:1);throw Error("Black depths differ")}}nK.RED=!0,nK.BLACK=!1;class nZ{copy(e,t,n,i,r){return this}insert(e,t,n){return new nK(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class nY{constructor(e,t=nY.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new nY(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,nK.BLACK,null,null))}remove(e){return new nY(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nK.BLACK,null,null))}get(e){let t;let n=this.root_;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty()){if(i)return i.key;return null}for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nG(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nG(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nG(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nG(this.root_,null,this.comparator_,!0,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(e,t){return t0(e.name,t.name)}function nQ(e,t){return t0(e,t)}nY.EMPTY_NODE=new nZ;let nX=function(e){return"number"==typeof e?"number:"+t6(e):"string:"+e},n0=function(e){if(e.isLeafNode()){let t=e.val();E("string"==typeof t||"number"==typeof t||"object"==typeof t&&eo(t,".sv"),"Priority must be a string or number.")}else E(e===o||e.isEmpty(),"priority of unexpected type.");E(e===o||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};class n1{constructor(e,t=n1.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,E(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),n0(this.priorityNode_)}static set __childrenNodeConstructor(e){a=e}static get __childrenNodeConstructor(){return a}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n1(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n1.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return nO(e)?this:".priority"===nE(e)?this.priorityNode_:n1.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:n1.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){let n=nE(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(E(".priority"!==n||1===nS(e),".priority must be the last token in a path"),this.updateImmediateChild(n,n1.__childrenNodeConstructor.EMPTY_NODE.updateChild(nP(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nX(this.priorityNode_.val())+":");let t=typeof this.value_;e+=t+":","number"===t?e+=t6(this.value_):e+=this.value_,this.lazyHash_=tj(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n1.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n1.__childrenNodeConstructor?-1:(E(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let t=typeof e.value_,n=typeof this.value_,i=n1.VALUE_TYPE_ORDER.indexOf(t),r=n1.VALUE_TYPE_ORDER.indexOf(n);return(E(i>=0,"Unknown leaf type: "+t),E(r>=0,"Unknown leaf type: "+n),i!==r)?r-i:"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}}n1.VALUE_TYPE_ORDER=["object","boolean","number","string"];class n2 extends nB{compare(e,t){let n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?t0(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nV.MIN}maxPost(){return new nV(tX,new n1("[PRIORITY-POST]",c))}makePost(e,t){return new nV(t,new n1("[PRIORITY-POST]",l(e)))}toString(){return".priority"}}let n3=new n2,n5=Math.log(2);class n4{constructor(e){this.count=parseInt(Math.log(e+1)/n5,10),this.current_=this.count-1;let t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}}let n6=function(e,t,n,i){e.sort(t);let r=function(t,i){let s;let o=i-t;if(0===o)return null;if(1===o)return s=e[t],new nK(n?n(s):s,s.node,nK.BLACK,null,null);{let a=parseInt(o/2,10)+t,l=r(t,a),c=r(a+1,i);return s=e[a],new nK(n?n(s):s,s.node,nK.BLACK,l,c)}};return new nY(i||t,function(t){let i=null,s=null,o=e.length,a=function(t,i){let s=o-t,a=o;o-=t;let c=r(s+1,a),u=e[s];l(new nK(n?n(u):u,u.node,i,null,c))},l=function(e){i?i.left=e:s=e,i=e};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,nK.BLACK):(a(i,nK.BLACK),a(i,nK.RED))}return s}(new n4(e.length)))},n8={};class n7{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return E(n8&&n3,"ChildrenNode.ts has not been loaded"),u=u||new n7({".priority":n8},{".priority":n3})}get(e){let t=ea(this.indexes_,e);if(!t)throw Error("No index defined for "+e);return t instanceof nY?t:null}hasIndex(e){return eo(this.indexSet_,e.toString())}addIndex(e,t){let n;E(e!==n$,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(nV.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();n=r?n6(i,e.getCompare()):n8;let a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;let c=Object.assign({},this.indexes_);return c[a]=n,new n7(c,l)}addToIndexes(e,t){return new n7(ec(this.indexes_,(n,i)=>{let r=ea(this.indexSet_,i);if(E(r,"Missing index implementation for "+i),n===n8){if(!r.isDefinedOn(e.node))return n8;{let n=[],i=t.getIterator(nV.Wrap),s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),n6(n,r.getCompare())}}{let i=t.get(e.name),r=n;return i&&(r=r.remove(new nV(e.name,i))),r.insert(e,e.node)}}),this.indexSet_)}removeFromIndexes(e,t){return new n7(ec(this.indexes_,n=>{if(n===n8)return n;{let i=t.get(e.name);return i?n.remove(new nV(e.name,i)):n}}),this.indexSet_)}}class n9{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&n0(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return h||(h=new n9(new nY(nQ),null,n7.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||h}updatePriority(e){return this.children_.isEmpty()?this:new n9(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{let t=this.children_.get(e);return null===t?h:t}}getChild(e){let t=nE(e);return null===t?this:this.getImmediateChild(t).getChild(nP(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(E(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{let n,i;let r=new nV(e,t);t.isEmpty()?(n=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(n=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(r,this.children_));let s=n.isEmpty()?h:this.priorityNode_;return new n9(n,s,i)}}updateChild(e,t){let n=nE(e);if(null===n)return t;{E(".priority"!==nE(e)||1===nS(e),".priority must be the last token in a path");let i=this.getImmediateChild(n).updateChild(nP(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let t={},n=0,i=0,r=!0;if(this.forEachChild(n3,(s,o)=>{t[s]=o.val(e),n++,r&&n9.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),e||!r||!(i<2*n))return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t;{let e=[];for(let n in t)e[n]=t[n];return e}}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+nX(this.getPriority().val())+":"),this.forEachChild(n3,(t,n)=>{let i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":tj(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let i=this.resolveIndex_(n);if(!i)return this.children_.getPredecessorKey(e);{let n=i.getPredecessorKey(new nV(e,t));return n?n.name:null}}getFirstChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.minKey();{let e=t.minKey();return e&&e.name}}getFirstChild(e){let t=this.getFirstChildName(e);return t?new nV(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.maxKey();{let e=t.maxKey();return e&&e.name}}getLastChild(e){let t=this.getLastChildName(e);return t?new nV(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,nV.Wrap),i=n.peek();for(;null!=i&&0>t.compare(i,e);)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,nV.Wrap),i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===it?-1:0}withIndex(e){if(e===n$||this.indexMap_.hasIndex(e))return this;{let t=this.indexMap_.addIndex(e,this.children_);return new n9(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===n$||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode()||!this.getPriority().equals(e.getPriority())||this.children_.count()!==e.children_.count())return!1;{let t=this.getIterator(n3),n=e.getIterator(n3),i=t.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=n.getNext()}return null===i&&null===r}}resolveIndex_(e){return e===n$?null:this.indexMap_.get(e.toString())}}n9.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ie extends n9{constructor(){super(new nY(nQ),n9.EMPTY_NODE,n7.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return n9.EMPTY_NODE}isEmpty(){return!1}}let it=new ie;function ii(e,t=null){if(null===e)return n9.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),E(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new n1(e,ii(t));if(e instanceof Array){let n=n9.EMPTY_NODE;return t4(e,(t,i)=>{if(eo(e,t)&&"."!==t.substring(0,1)){let e=ii(i);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(ii(t))}{let n=[],i=!1;if(t4(e,(e,t)=>{if("."!==e.substring(0,1)){let r=ii(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new nV(e,r)))}}),0===n.length)return n9.EMPTY_NODE;let r=n6(n,nJ,e=>e.name,nQ);if(!i)return new n9(r,ii(t),n7.Default);{let e=n6(n,n3.getCompare());return new n9(r,ii(t),new n7({".priority":e},{".priority":n3}))}}}Object.defineProperties(nV,{MIN:{value:new nV(tQ,n9.EMPTY_NODE)},MAX:{value:new nV(tX,it)}}),nH.__EMPTY_NODE=n9.EMPTY_NODE,n1.__childrenNodeConstructor=n9,o=it,c=it,l=ii;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends nB{constructor(e){super(),this.indexPath_=e,E(!nO(e)&&".priority"!==nE(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?t0(e.name,t.name):r}makePost(e,t){let n=ii(e);return new nV(t,n9.EMPTY_NODE.updateChild(this.indexPath_,n))}maxPost(){return new nV(tX,n9.EMPTY_NODE.updateChild(this.indexPath_,it))}toString(){return nN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends nB{compare(e,t){let n=e.node.compareTo(t.node);return 0===n?t0(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nV.MIN}maxPost(){return nV.MAX}makePost(e,t){return new nV(t,ii(e))}toString(){return".value"}}let io=new is;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(e){return{type:"value",snapshotNode:e}}function il(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ic(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function iu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(ic(t,o)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(il(t,n)):s.trackChildChange(iu(t,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return null==n||(e.isLeafNode()||e.forEachChild(n3,(e,i)=>{t.hasChild(e)||n.trackChildChange(ic(e,i))}),t.isLeafNode()||t.forEachChild(n3,(t,i)=>{if(e.hasChild(t)){let r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(iu(t,i,r))}else n.trackChildChange(il(t,i))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?n9.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.indexedFilter_=new ih(e.getIndex()),this.index_=e.getIndex(),this.startPost_=id.getStartPost_(e),this.endPost_=id.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?0>=this.index_.compare(this.getStartPost(),e):0>this.index_.compare(this.getStartPost(),e),n=this.endIsInclusive_?0>=this.index_.compare(e,this.getEndPost()):0>this.index_.compare(e,this.getEndPost());return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new nV(t,n))||(n=n9.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=n9.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(n9.EMPTY_NODE);let r=this;return t.forEachChild(n3,(e,t)=>{r.matches(new nV(e,t))||(i=i.updateImmediateChild(e,n9.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(!e.hasStart())return e.getIndex().minPost();{let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}}static getEndPost_(e){if(!e.hasEnd())return e.getIndex().maxPost();{let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new id(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return(this.rangedFilter_.matches(new nV(t,n))||(n=n9.EMPTY_NODE),e.getImmediateChild(t).equals(n))?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=n9.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=n9.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t)){if(this.withinDirectionalEnd(t))i=i.updateImmediateChild(t.name,t.node),n++;else break}}}else{let e;i=(i=t.withIndex(this.index_)).updatePriority(n9.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){let t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,n9.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){let e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();E(e.numChildren()===this.limit_,"");let o=new nV(t,n),a=this.reverse_?e.getFirstChild(this.index_):e.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(e.hasChild(t)){let c=e.getImmediateChild(t),u=i.getChildAfterChild(this.index_,a,this.reverse_);for(;null!=u&&(u.name===t||e.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);let h=null==u?1:s(u,o);if(l&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(iu(t,n,c)),e.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(ic(t,c));let n=e.updateImmediateChild(t,n9.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(il(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:l&&s(a,o)>=0?(null!=r&&(r.trackChildChange(ic(a.name,a.node)),r.trackChildChange(il(t,n))),e.updateImmediateChild(t,n).updateImmediateChild(a.name,n9.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=n3}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(E(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:tQ}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(E(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:tX}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===n3}copy(){let e=new im;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ig(e,t,n){let i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function i_(e,t,n){let i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function iv(e,t){let n=e.copy();return n.index_=t,n}function iy(e){let t;let n={};if(e.isDefault())return n;if(e.index_===n3?t="$priority":e.index_===io?t="$value":e.index_===n$?t="$key":(E(e.index_ instanceof ir,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=en(t),e.startSet_){let t=e.startAfterSet_?"startAfter":"startAt";n[t]=en(e.indexStartValue_),e.startNameSet_&&(n[t]+=","+en(e.indexStartName_))}if(e.endSet_){let t=e.endBeforeSet_?"endBefore":"endAt";n[t]=en(e.indexEndValue_),e.endNameSet_&&(n[t]+=","+en(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function iw(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==n3&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends nb{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=tH("p:rest:"),this.listens_={}}reportStats(e){throw Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let s=ib.getListenId_(e,n),o={};this.listens_[s]=o;let a=iy(e._queryParams);this.restRequest_(r+".json",a,(e,t)=>{let a=t;404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),ea(this.listens_,s)===o&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})}unlisten(e,t){let n=ib.getListenId_(e,t);delete this.listens_[n]}get(e){let t=iy(e._queryParams),n=e._path.toString(),i=new z;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(t.auth=i.accessToken),r&&r.token&&(t.ac=r.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ed(t);this.log_("Sending REST request for "+s);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=et(o.responseText)}catch(e){tK("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&tK("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.rootNode_=n9.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){return{value:null,children:new Map}}function iT(e,t,n){if(nO(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{let i=nE(t);e.children.has(i)||e.children.set(i,iC()),iT(e.children.get(i),t=nP(t),n)}}function ik(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{ik(i,new nT(t.toString()+"/"+e),n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&t4(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class iS{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new iE(e),ne(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;t4(e,(e,i)=>{i>0&&eo(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),ne(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function iP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function iN(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(v=I||(I={}))[v.OVERWRITE=0]="OVERWRITE",v[v.MERGE=1]="MERGE",v[v.ACK_USER_WRITE=2]="ACK_USER_WRITE",v[v.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=I.ACK_USER_WRITE,this.source=iP()}operationForChild(e){if(!nO(this.path))return E(nE(this.path)===e,"operationForChild called for unrelated child."),new ix(nP(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new nT(e));return new ix(nk(),t,this.revert)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.source=e,this.path=t,this.type=I.LISTEN_COMPLETE}operationForChild(e){return nO(this.path)?new iA(this.source,nk()):new iA(this.source,nP(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=I.OVERWRITE}operationForChild(e){return nO(this.path)?new iO(this.source,nk(),this.snap.getImmediateChild(e)):new iO(this.source,nP(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=I.MERGE}operationForChild(e){if(!nO(this.path))return E(nE(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new iD(this.source,nP(this.path),this.children);{let t=this.children.subtree(new nT(e));return t.isEmpty()?null:t.value?new iO(this.source,nk(),t.value):new iD(this.source,nk(),t)}}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nO(e))return this.isFullyInitialized()&&!this.filtered_;let t=nE(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function iF(e,t,n,i,r,s){let o=i.filter(e=>e.type===n);o.sort((t,n)=>(function(e,t,n){if(null==t.childName||null==n.childName)throw S("Should only compare child_ events.");let i=new nV(t.childName,t.snapshotNode),r=new nV(n.childName,n.snapshotNode);return e.index_.compare(i,r)})(e,t,n)),o.forEach(n=>{let i=("value"===n.type||"child_removed"===n.type||(n.prevName=s.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(e,t){return{eventCache:e,serverCache:t}}function ij(e,t,n,i){return iU(new iL(t,n,i),e.serverCache)}function iq(e,t,n,i){return iU(e.eventCache,new iL(t,n,i))}function iz(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function iW(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let iV=()=>(d||(d=new nY(t1)),d);class iB{constructor(e,t=iV()){this.value=e,this.children=t}static fromObject(e){let t=new iB(null);return t4(e,(e,n)=>{t=t.set(new nT(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:nk(),value:this.value};if(nO(e))return null;{let n=nE(e),i=this.children.get(n);if(null===i)return null;{let r=i.findRootMostMatchingPathAndValue(nP(e),t);return null!=r?{path:nA(new nT(n),r.path),value:r.value}:null}}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nO(e))return this;{let t=nE(e),n=this.children.get(t);return null!==n?n.subtree(nP(e)):new iB(null)}}set(e,t){if(nO(e))return new iB(t,this.children);{let n=nE(e),i=(this.children.get(n)||new iB(null)).set(nP(e),t),r=this.children.insert(n,i);return new iB(this.value,r)}}remove(e){if(nO(e))return this.children.isEmpty()?new iB(null):new iB(null,this.children);{let t=nE(e),n=this.children.get(t);if(!n)return this;{let i;let r=n.remove(nP(e));return(i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty())?new iB(null):new iB(this.value,i)}}}get(e){if(nO(e))return this.value;{let t=nE(e),n=this.children.get(t);return n?n.get(nP(e)):null}}setTree(e,t){if(nO(e))return t;{let n;let i=nE(e),r=(this.children.get(i)||new iB(null)).setTree(nP(e),t);return n=r.isEmpty()?this.children.remove(i):this.children.insert(i,r),new iB(this.value,n)}}fold(e){return this.fold_(nk(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(nA(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,nk(),t)}findOnPath_(e,t,n){let i=!!this.value&&n(t,this.value);if(i)return i;if(nO(e))return null;{let i=nE(e),r=this.children.get(i);return r?r.findOnPath_(nP(e),nA(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nk(),t)}foreachOnPath_(e,t,n){if(nO(e))return this;{this.value&&n(t,this.value);let i=nE(e),r=this.children.get(i);return r?r.foreachOnPath_(nP(e),nA(t,i),n):new iB(null)}}foreach(e){this.foreach_(nk(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(nA(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e){this.writeTree_=e}static empty(){return new iH(new iB(null))}}function i$(e,t,n){if(nO(t))return new iH(new iB(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){let r=i.path,s=i.value,o=nD(r,t);return s=s.updateChild(o,n),new iH(e.writeTree_.set(r,s))}{let i=new iB(n);return new iH(e.writeTree_.setTree(t,i))}}}function iG(e,t,n){let i=e;return t4(n,(e,n)=>{i=i$(i,nA(t,e),n)}),i}function iK(e,t){return nO(t)?iH.empty():new iH(e.writeTree_.setTree(t,new iB(null)))}function iZ(e,t){return null!=iY(e,t)}function iY(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(nD(n.path,t)):null}function iJ(e){let t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(n3,(e,n)=>{t.push(new nV(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new nV(e,n.value))}),t}function iQ(e,t){if(nO(t))return e;{let n=iY(e,t);return new iH(null!=n?new iB(n):e.writeTree_.subtree(t))}}function iX(e){return e.writeTree_.isEmpty()}function i0(e,t){return function e(t,n,i){if(null!=n.value)return i.updateChild(t,n.value);{let r=null;return n.children.inorderTraversal((n,s)=>{".priority"===n?(E(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):i=e(nA(t,n),s,i)}),i.getChild(t).isEmpty()||null===r||(i=i.updateChild(nA(t,".priority"),r)),i}}(nk(),e.writeTree_,t)}function i1(e){return e.visible}function i2(e,t,n){let i=iH.empty();for(let r=0;r<e.length;++r){let s=e[r];if(t(s)){let e;let t=s.path;if(s.snap)nF(n,t)?i=i$(i,e=nD(n,t),s.snap):nF(t,n)&&(e=nD(t,n),i=i$(i,nk(),s.snap.getChild(e)));else if(s.children){if(nF(n,t))i=iG(i,e=nD(n,t),s.children);else if(nF(t,n)){if(nO(e=nD(t,n)))i=iG(i,nk(),s.children);else{let t=ea(s.children,nE(e));if(t){let n=t.getChild(nP(e));i=i$(i,nk(),n)}}}}else throw S("WriteRecord should have .snap or .children")}}return i}function i3(e,t,n,i,r){if(i||r){let s=iQ(e.visibleWrites,t);return!r&&iX(s)?n:r||null!=n||iZ(s,nk())?i0(i2(e.allWrites,function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(nF(e.path,t)||nF(t,e.path))},t),n||n9.EMPTY_NODE):null}{let i=iY(e.visibleWrites,t);if(null!=i)return i;{let i=iQ(e.visibleWrites,t);return iX(i)?n:null!=n||iZ(i,nk())?i0(i,n||n9.EMPTY_NODE):null}}}function i5(e,t,n,i){return i3(e.writeTree,e.treePath,t,n,i)}function i4(e,t){return function(e,t,n){let i=n9.EMPTY_NODE,r=iY(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(n3,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(!n)return iJ(iQ(e.visibleWrites,t)).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i;{let r=iQ(e.visibleWrites,t);return n.forEachChild(n3,(e,t)=>{let n=i0(iQ(r,new nT(e)),t);i=i.updateImmediateChild(e,n)}),iJ(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}}(e.writeTree,e.treePath,t)}function i6(e,t,n,i){return function(e,t,n,i,r){E(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=nA(t,n);if(iZ(e.visibleWrites,s))return null;{let t=iQ(e.visibleWrites,s);return iX(t)?r.getChild(n):i0(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function i8(e,t){var n,i;return n=e.writeTree,i=nA(e.treePath,t),iY(n.visibleWrites,i)}function i7(e,t,n){return function(e,t,n,i){let r=nA(t,n),s=iY(e.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?i0(iQ(e.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function i9(e,t){return re(nA(e.treePath,t),e.writeTree)}function re(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;E("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),E(".priority"!==n,"Only non-priority child changes can be tracked.");let i=this.changeMap.get(n);if(i){let r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,iu(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,ic(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,il(n,e.snapshotNode));else if("child_changed"===t&&"child_changed"===r)this.changeMap.set(n,iu(n,e.snapshotNode,i.oldSnap));else throw S("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}}let ri=new rn;class rr{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=null!=this.optCompleteServerCache_?new iL(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return i7(this.writes_,e,t)}}getChildAfterChild(e,t,n){var i;let r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:iW(this.viewCache_),s=function(e,t,n,i,r,s,o){let a;let l=iQ(e.visibleWrites,t),c=iY(l,nk());if(null!=c)a=c;else{if(null==n)return[];a=i0(l,n)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];{let e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),r=n.getNext();for(;r&&e.length<1;)0!==t(r,i)&&e.push(r),r=n.getNext();return e}}((i=this.writes_).writeTree,i.treePath,r,t,0,n,e);return 0===s.length?null:s[0]}}function rs(e,t,n,i,r,s){let o=t.eventCache;if(null!=i8(i,n))return t;{let a,l;if(nO(n)){if(E(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let n=iW(t),r=i4(i,n instanceof n9?n:n9.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{let n=i5(i,iW(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}}else{let c=nE(n);if(".priority"===c){E(1===nS(n),"Can't have a priority with additional path components");let r=o.getNode(),s=i6(i,n,r,l=t.serverCache.getNode());a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{let u;let h=nP(n);if(o.isCompleteForChild(c)){l=t.serverCache.getNode();let e=i6(i,n,o.getNode(),l);u=null!=e?o.getNode().getImmediateChild(c).updateChild(h,e):o.getNode().getImmediateChild(c)}else u=i7(i,c,t.serverCache);a=null!=u?e.filter.updateChild(o.getNode(),c,u,h,r,s):o.getNode()}}return ij(t,a,o.isFullyInitialized()||nO(n),e.filter.filtersNodes())}}function ro(e,t,n,i,r,s,o,a){let l;let c=t.serverCache,u=o?e.filter:e.filter.getIndexedFilter();if(nO(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let e=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),e,null)}else{let e=nE(n);if(!c.isCompleteForPath(n)&&nS(n)>1)return t;let r=nP(n),s=c.getNode().getImmediateChild(e).updateChild(r,i);l=".priority"===e?u.updatePriority(c.getNode(),s):u.updateChild(c.getNode(),e,s,r,ri,null)}let h=iq(t,l,c.isFullyInitialized()||nO(n),u.filtersNodes()),d=new rr(r,h,s);return rs(e,h,n,r,d,a)}function ra(e,t,n,i,r,s,o){let a,l;let c=t.eventCache,u=new rr(r,t,s);if(nO(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,o),a=ij(t,l,!0,e.filter.filtersNodes());else{let r=nE(n);if(".priority"===r)l=e.filter.updatePriority(t.eventCache.getNode(),i),a=ij(t,l,c.isFullyInitialized(),c.isFiltered());else{let s;let l=nP(n),h=c.getNode().getImmediateChild(r);if(nO(l))s=i;else{let e=u.getCompleteChild(r);s=null!=e?".priority"===nR(l)&&e.getChild(nx(l)).isEmpty()?e:e.updateChild(l,i):n9.EMPTY_NODE}a=h.equals(s)?t:ij(t,e.filter.updateChild(c.getNode(),r,s,l,u,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return a}function rl(e,t){return e.eventCache.isCompleteForChild(t)}function rc(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function ru(e,t,n,i,r,s,o,a){let l;if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t;l=nO(n)?i:new iB(null).setTree(n,i);let u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){let l=rc(e,t.serverCache.getNode().getImmediateChild(n),i);c=ro(e,c,new nT(n),l,r,s,o,a)}}),l.children.inorderTraversal((n,i)=>{let l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){let l=rc(e,t.serverCache.getNode().getImmediateChild(n),i);c=ro(e,c,new nT(n),l,r,s,o,a)}}),c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,i=new ih(n.getIndex()),r=n.loadsAllData()?new ih(n.getIndex()):n.hasLimit()?new ip(n):new id(n);this.processor_={filter:r};let s=t.serverCache,o=t.eventCache,a=i.updateFullNode(n9.EMPTY_NODE,s.getNode(),null),l=r.updateFullNode(n9.EMPTY_NODE,o.getNode(),null),c=new iL(a,s.isFullyInitialized(),i.filtersNodes()),u=new iL(l,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=iU(u,c),this.eventGenerator_=new iM(this.query_)}get query(){return this.query_}}function rd(e){return 0===e.eventRegistrations_.length}function rp(e,t,n){let i=[];if(n){E(null==t,"A cancel should cancel all event registrations.");let r=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,r);t&&i.push(t)})}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){let r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function rf(e,t,n,i){var r,s;t.type===I.MERGE&&null!==t.source.queryId&&(E(iW(e.viewCache_),"We should always have a full cache before handling merges"),E(iz(e.viewCache_),"Missing event cache, even though we have a server cache"));let o=e.viewCache_,a=function(e,t,n,i,r){let s,o;let a=new rt;if(n.type===I.OVERWRITE)n.source.fromUser?s=ra(e,t,n.path,n.snap,i,r,a):(E(n.source.fromServer,"Unknown source."),o=n.source.tagged||t.serverCache.isFiltered()&&!nO(n.path),s=ro(e,t,n.path,n.snap,i,r,o,a));else if(n.type===I.MERGE){var l,c;let u;n.source.fromUser?(l=n.path,c=n.children,u=t,c.foreach((n,s)=>{let o=nA(l,n);rl(t,nE(o))&&(u=ra(e,u,o,s,i,r,a))}),c.foreach((n,s)=>{let o=nA(l,n);rl(t,nE(o))||(u=ra(e,u,o,s,i,r,a))}),s=u):(E(n.source.fromServer,"Unknown source."),o=n.source.tagged||t.serverCache.isFiltered(),s=ru(e,t,n.path,n.children,i,r,o,a))}else if(n.type===I.ACK_USER_WRITE)s=n.revert?function(e,t,n,i,r,s){let o;if(null!=i8(i,n))return t;{let a;let l=new rr(i,t,r),c=t.eventCache.getNode();if(nO(n)||".priority"===nE(n)){let n;if(t.serverCache.isFullyInitialized())n=i5(i,iW(t));else{let e=t.serverCache.getNode();E(e instanceof n9,"serverChildren would be complete if leaf node"),n=i4(i,e)}a=e.filter.updateFullNode(c,n,s)}else{let r=nE(n),u=i7(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=c.getImmediateChild(r)),(a=null!=u?e.filter.updateChild(c,r,u,nP(n),l,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(c,r,n9.EMPTY_NODE,nP(n),l,s):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=i5(i,iW(t))).isLeafNode()&&(a=e.filter.updateFullNode(a,o,s))}return o=t.serverCache.isFullyInitialized()||null!=i8(i,nk()),ij(t,a,o,e.filter.filtersNodes())}}(e,t,n.path,i,r,a):function(e,t,n,i,r,s,o){if(null!=i8(r,n))return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(nO(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ro(e,t,n,l.getNode().getChild(n),r,s,a,o);if(!nO(n))return t;{let i=new iB(null);return l.getNode().forEachChild(n$,(e,t)=>{i=i.set(new nT(e),t)}),ru(e,t,n,i,r,s,a,o)}}{let c=new iB(null);return i.foreach((e,t)=>{let i=nA(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),ru(e,t,n,c,r,s,a,o)}}(e,t,n.path,n.affectedTree,i,r,a);else if(n.type===I.LISTEN_COMPLETE)s=function(e,t,n,i,r){let s=t.serverCache;return rs(e,iq(t,s.getNode(),s.isFullyInitialized()||nO(n),s.isFiltered()),n,i,ri,r)}(e,t,n.path,i,a);else throw S("Unknown operation type: "+n.type);let u=a.getChanges();return function(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=iz(e);!(n.length>0)&&e.eventCache.isFullyInitialized()&&(!r||i.getNode().equals(s))&&i.getNode().getPriority().equals(s.getPriority())||n.push(ia(iz(t)))}}(t,s,u),{viewCache:s,changes:u}}(e.processor_,o,t,n,i);return r=e.processor_,E((s=a.viewCache).eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),E(s.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed"),E(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,rm(e,a.changes,a.viewCache.eventCache.getNode(),null)}function rm(e,t,n,i){let r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){let r=[],s=[];return t.forEach(t=>{if("child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)){var n;s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}}),iF(e,r,"child_removed",t,i,n),iF(e,r,"child_added",t,i,n),iF(e,r,"child_moved",s,i,n),iF(e,r,"child_changed",t,i,n),iF(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}class rg{constructor(){this.views=new Map}}function r_(e,t,n,i){let r=t.source.queryId;if(null!==r){let s=e.views.get(r);return E(null!=s,"SyncTree gave us an op for an invalid query."),rf(s,t,n,i)}{let r=[];for(let s of e.views.values())r=r.concat(rf(s,t,n,i));return r}}function rv(e,t,n,i,r){let s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=i5(n,r?i:null),s=!1;return e?s=!0:(e=i instanceof n9?i4(n,i):n9.EMPTY_NODE,s=!1),new rh(t,iU(new iL(e,s,!1),new iL(i,r,!1)))}return o}function ry(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function rw(e,t){let n=null;for(let i of e.views.values())n=n||function(e,t){let n=iW(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!nO(t)&&!n.getImmediateChild(nE(t)).isEmpty())?n.getChild(t):null}(i,t);return n}function rb(e,t){if(t._queryParams.loadsAllData())return rC(e);{let n=t._queryIdentifier;return e.views.get(n)}}function rI(e){return null!=rC(e)}function rC(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let rT=1;class rk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new iB(null),this.pendingWriteTree_={visibleWrites:iH.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function rE(e,t,n,i,r){var s,o;return(s=e.pendingWriteTree_,o=r,E(i>s.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),s.allWrites.push({path:t,snap:n,writeId:i,visible:o}),o&&(s.visibleWrites=i$(s.visibleWrites,t,n)),s.lastWriteId=i,r)?rO(e,new iO(iP(),t,n)):[]}function rS(e,t,n=!1){let i=function(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(!function(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);E(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){let t=e.allWrites[o];t.visible&&(o>=n&&function(e,t){if(e.snap)return nF(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&nF(nA(e.path,n),t))return!0;return!1}(t,i.path)?r=!1:nF(i.path,t.path)&&(s=!0)),o--}return!!r&&(s?(e.visibleWrites=i2(e.allWrites,i1,nk()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1):i.snap?e.visibleWrites=iK(e.visibleWrites,i.path):t4(i.children,t=>{e.visibleWrites=iK(e.visibleWrites,nA(i.path,t))}),!0)}(e.pendingWriteTree_,t))return[];{let t=new iB(null);return null!=i.snap?t=t.set(nk(),!0):t4(i.children,e=>{t=t.set(new nT(e),!0)}),rO(e,new ix(i.path,t,n))}}function rP(e,t,n){return rO(e,new iO(iR(),t,n))}function rR(e,t,n,i,r=!1){let s=t._path,o=e.syncPointTree_.get(s),a=[];if(o&&("default"===t._queryIdentifier||null!=rb(o,t))){let l=function(e,t,n,i){let r=t._queryIdentifier,s=[],o=[],a=rI(e);if("default"===r)for(let[t,r]of e.views.entries())o=o.concat(rp(r,n,i)),rd(r)&&(e.views.delete(t),r.query._queryParams.loadsAllData()||s.push(r.query));else{let t=e.views.get(r);t&&(o=o.concat(rp(t,n,i)),rd(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!rI(e)&&s.push(new(E(p,"Reference.ts has not been loaded"),p)(t._repo,t._path)),{removed:s,events:o}}(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!r){let n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),r=e.syncPointTree_.findOnPath(s,(e,t)=>rI(t));if(n&&!r){let t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){let n=t.fold((e,t,n)=>{if(t&&rI(t))return[rC(t)];{let e=[];return t&&(e=ry(t)),t4(n,(t,n)=>{e=e.concat(n)}),e}});for(let t=0;t<n.length;++t){let i=n[t],r=i.query,s=rD(e,i);e.listenProvider_.startListening(rq(r),rL(e,r),s.hashFn,s.onComplete)}}}r||!(c.length>0)||i||(n?e.listenProvider_.stopListening(rq(t),null):c.forEach(t=>{let n=e.queryToTagMap.get(rM(t));e.listenProvider_.stopListening(rq(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){let i=t[n];if(!i._queryParams.loadsAllData()){let t=rM(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function rN(e,t,n,i){let r=rF(e,i);if(null==r)return[];{let i=rU(r),s=i.path,o=i.queryId,a=nD(s,t);return rj(e,s,new iO(iN(o),a,n))}}function rx(e,t,n,i=!1){let r;let s=t._path,o=null,a=!1;e.syncPointTree_.foreachOnPath(s,(e,t)=>{let n=nD(e,s);o=o||rw(t,n),a=a||rI(t)});let l=e.syncPointTree_.get(s);l?(a=a||rI(l),o=o||rw(l,nk())):(l=new rg,e.syncPointTree_=e.syncPointTree_.set(s,l)),null!=o?r=!0:(r=!1,o=n9.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((e,t)=>{let n=rw(t,nk());n&&(o=o.updateImmediateChild(e,n))}));let c=null!=rb(l,t);if(!c&&!t._queryParams.loadsAllData()){let n=rM(t);E(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");let i=rT++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let u=function(e,t,n,i,r,s){let o=rv(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),!function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){let n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(n3,(e,t)=>{i.push(il(e,t))}),n.isFullyInitialized()&&i.push(ia(n.getNode())),rm(e,i,n.getNode(),t)}(o,n)}(l,t,n,re(s,e.pendingWriteTree_),o,r);if(!c&&!a&&!i){let n=rb(l,t);u=u.concat(function(e,t,n){let i=t._path,r=rL(e,t),s=rD(e,n),o=e.listenProvider_.startListening(rq(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)E(!rI(a.value),"If we're adding a query, it shouldn't be shadowed");else{let t=a.fold((e,t,n)=>{if(!nO(e)&&t&&rI(t))return[rC(t).query];{let e=[];return t&&(e=e.concat(ry(t).map(e=>e.query))),t4(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let i=t[n];e.listenProvider_.stopListening(rq(i),rL(e,i))}}return o}(e,t,n))}return u}function rA(e,t,n){let i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{let i=rw(n,nD(e,t));if(i)return i});return i3(i,t,r,n,!0)}function rO(e,t){var n;return function e(t,n,i,r){if(nO(t.path))return function e(t,n,i,r){let s=n.get(nk());null==i&&null!=s&&(i=rw(s,nk()));let o=[];return n.children.inorderTraversal((n,s)=>{let a=i?i.getImmediateChild(n):null,l=i9(r,n),c=t.operationForChild(n);c&&(o=o.concat(e(c,s,a,l)))}),s&&(o=o.concat(r_(s,t,r,i))),o}(t,n,i,r);{let s=n.get(nk());null==i&&null!=s&&(i=rw(s,nk()));let o=[],a=nE(t.path),l=t.operationForChild(a),c=n.children.get(a);if(c&&l){let t=i?i.getImmediateChild(a):null,n=i9(r,a);o=o.concat(e(l,c,t,n))}return s&&(o=o.concat(r_(s,t,r,i))),o}}(t,e.syncPointTree_,null,(n=e.pendingWriteTree_,re(nk(),n)))}function rD(e,t){let n=t.query,i=rL(e,n);return{hashFn:()=>(t.viewCache_.serverCache.getNode()||n9.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t){var r;return i?function(e,t,n){let i=rF(e,n);if(!i)return[];{let n=rU(i),r=n.path,s=n.queryId,o=nD(r,t);return rj(e,r,new iA(iN(s),o))}}(e,n._path,i):(r=n._path,rO(e,new iA(iR(),r)))}{let i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");let i=Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return rR(e,n,null,i)}}}}function rL(e,t){let n=rM(t);return e.queryToTagMap.get(n)}function rM(e){return e._path.toString()+"$"+e._queryIdentifier}function rF(e,t){return e.tagToQueryMap.get(t)}function rU(e){let t=e.indexOf("$");return E(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new nT(e.substr(0,t))}}function rj(e,t,n){let i=e.syncPointTree_.get(t);return E(i,"Missing sync point for query tag that we're tracking"),r_(i,n,re(t,e.pendingWriteTree_),null)}function rq(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(E(f,"Reference.ts has not been loaded"),f)(e._repo,e._path):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.node_=e}getImmediateChild(e){return new rz(this.node_.getImmediateChild(e))}node(){return this.node_}}class rW{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=nA(this.path_,e);return new rW(this.syncTree_,t)}node(){return rA(this.syncTree_,this.path_)}}let rV=function(e,t,n){return e&&"object"==typeof e?(E(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"])?rB(e[".sv"],t,n):"object"==typeof e[".sv"]?rH(e[".sv"],t):void E(!1,"Unexpected server value: "+JSON.stringify(e,null,2)):e},rB=function(e,t,n){if("timestamp"===e)return n.timestamp;E(!1,"Unexpected server value: "+e)},rH=function(e,t,n){e.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;"number"!=typeof i&&E(!1,"Unexpected increment value: "+i);let r=t.node();if(E(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return"number"!=typeof s?i:s+i},r$=function(e,t,n,i){return rK(t,new rW(n,e),i)},rG=function(e,t,n){return rK(e,new rz(t),n)};function rK(e,t,n){let i;let r=rV(e.getPriority().val(),t.getImmediateChild(".priority"),n);if(!e.isLeafNode())return i=e,r!==e.getPriority().val()&&(i=i.updatePriority(new n1(r))),e.forEachChild(n3,(e,r)=>{let s=rK(r,t.getImmediateChild(e),n);s!==r&&(i=i.updateImmediateChild(e,s))}),i;{let i=rV(e.getValue(),t,n);return i!==e.getValue()||r!==e.getPriority().val()?new n1(i,ii(r)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function rY(e,t){let n=t instanceof nT?t:new nT(t),i=e,r=nE(n);for(;null!==r;){let e=ea(i.node.children,r)||{children:{},childCount:0};i=new rZ(r,i,e),r=nE(n=nP(n))}return i}function rJ(e){return e.node.value}function rQ(e,t){e.node.value=t,function e(t){null!==t.parent&&function(t,n,i){let r=void 0===rJ(i)&&!rX(i),s=eo(t.node.children,n);r&&s?(delete t.node.children[n],t.node.childCount--,e(t)):r||s||(t.node.children[n]=i.node,t.node.childCount++,e(t))}(t.parent,t.name,t)}(e)}function rX(e){return e.node.childCount>0}function r0(e,t){t4(e.node.children,(n,i)=>{t(new rZ(n,e,i))})}function r1(e){return new nT(null===e.parent?e.name:r1(e.parent)+"/"+e.name)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r2=/[\[\].#$\/\u0000-\u001F\u007F]/,r3=/[\[\].#$\u0000-\u001F\u007F]/,r5=function(e){return"string"==typeof e&&0!==e.length&&!r2.test(e)},r4=function(e){return"string"==typeof e&&0!==e.length&&!r3.test(e)},r6=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!tY(e)||e&&"object"==typeof e&&eo(e,".sv")},r8=function(e,t,n,i){i&&void 0===t||r7(ew(e,"value"),t,n)},r7=function(e,t,n){let i=n instanceof nT?new nU(n,e):n;if(void 0===t)throw Error(e+"contains undefined "+nq(i));if("function"==typeof t)throw Error(e+"contains a function "+nq(i)+" with contents = "+t.toString());if(tY(t))throw Error(e+"contains "+t.toString()+" "+nq(i));if("string"==typeof t&&t.length>3495253.3333333335&&eT(t)>10485760)throw Error(e+"contains a string greater than 10485760 utf8 bytes "+nq(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,r=!1;if(t4(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!r5(t)))throw Error(e+" contains an invalid key ("+t+") "+nq(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=eT(t),nj(i),r7(e,s,i),function(e){let t=e.parts_.pop();e.byteLength_-=eT(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw Error(e+' contains ".value" child '+nq(i)+" in addition to actual children.")}},r9=function(e,t){let n,i;for(n=0;n<t.length;n++){let r=nN(i=t[n]);for(let t=0;t<r.length;t++)if(".priority"===r[t]&&t===r.length-1);else if(!r5(r[t]))throw Error(e+"contains an invalid key ("+r[t]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(nL);let r=null;for(n=0;n<t.length;n++){if(i=t[n],null!==r&&nF(r,i))throw Error(e+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},se=function(e,t,n,i){if(i&&void 0===t)return;let r=ew(e,"values");if(!(t&&"object"==typeof t)||Array.isArray(t))throw Error(r+" must be an object containing the children to replace.");let s=[];t4(t,(e,t)=>{let i=new nT(e);if(r7(r,t,nA(n,i)),".priority"===nR(i)&&!r6(t))throw Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(i)}),r9(r,s)},st=function(e,t,n){if(!n||void 0!==t){if(tY(t))throw Error(ew(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!r6(t))throw Error(ew(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sn=function(e,t,n,i){if((!i||void 0!==n)&&!r5(n))throw Error(ew(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},si=function(e,t,n,i){if((!i||void 0!==n)&&!r4(n))throw Error(ew(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},sr=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),si(e,t,n,i)},ss=function(e,t){if(".info"===nE(t))throw Error(e+" failed = Can't modify data under /.info/")},so=function(e,t){var n;let i=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!r5(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==i.length&&((n=i)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),!r4(n)))throw Error(ew(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sl(e,t){let n=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();null===n||nM(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function sc(e,t,n){sl(e,n),sh(e,e=>nM(e,t))}function su(e,t,n){sl(e,n),sh(e,e=>nF(e,t)||nF(t,e))}function sh(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];r&&(t(r.path)?(function(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(null!==n){e.events[t]=null;let i=n.getEventRunner();tz&&tB("event: "+n.toString()),t9(i)}}}(e.eventLists_[i]),e.eventLists_[i]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd="repo_interrupt";class sp{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=iC(),this.transactionQueueTree_=new rZ,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sf(e){let t=e.infoData_.getNode(new nT(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function sm(e){var t;return(t=t={timestamp:sf(e)}).timestamp=t.timestamp||new Date().getTime(),t}function sg(e,t,n,i,r){e.dataUpdateCount++;let s=new nT(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r){if(i){let t=ec(n,e=>ii(e));o=function(e,t,n,i){let r=rF(e,i);if(!r)return[];{let i=rU(r),s=i.path,o=i.queryId,a=nD(s,t),l=iB.fromObject(n);return rj(e,s,new iD(iN(o),a,l))}}(e.serverSyncTree_,s,t,r)}else{let t=ii(n);o=rN(e.serverSyncTree_,s,t,r)}}else if(i){let t=ec(n,e=>ii(e));o=function(e,t,n){let i=iB.fromObject(n);return rO(e,new iD(iR(),t,i))}(e.serverSyncTree_,s,t)}else{let t=ii(n);o=rP(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=sP(e,s)),su(e.eventQueue_,a,o)}function s_(e,t){sv(e,"connected",t),!1===t&&function(e){sT(e,"onDisconnectEvents");let t=sm(e),n=iC();ik(e.onDisconnect_,nk(),(i,r)=>{let s=r$(i,r,e.serverSyncTree_,t);iT(n,i,s)});let i=[];ik(n,nk(),(t,n)=>{i=i.concat(rP(e.serverSyncTree_,t,n));let r=sA(e,t);sP(e,r)}),e.onDisconnect_=iC(),su(e.eventQueue_,nk(),i)}(e)}function sv(e,t,n){let i=new nT("/.info/"+t),r=ii(n);e.infoData_.updateSnapshot(i,r);let s=rP(e.infoSyncTree_,i,r);su(e.eventQueue_,i,s)}function sy(e){return e.nextWriteId_++}function sw(e,t,n,i,r){sT(e,"set",{path:t.toString(),value:n,priority:i});let s=sm(e),o=ii(n,i),a=rG(o,rA(e.serverSyncTree_,t),s),l=sy(e),c=rE(e.serverSyncTree_,t,a,l,!0);sl(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(n,i)=>{let s="ok"===n;s||tK("set at "+t+" failed: "+n);let o=rS(e.serverSyncTree_,l,!s);su(e.eventQueue_,t,o),sk(e,r,n,i)});let u=sA(e,t);sP(e,u),su(e.eventQueue_,u,[])}function sb(e,t,n,i){let r=ii(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),(n,s)=>{"ok"===n&&iT(e.onDisconnect_,t,r),sk(e,i,n,s)})}function sI(e,t,n){let i;i=".info"===nE(t._path)?rR(e.infoSyncTree_,t,n):rR(e.serverSyncTree_,t,n),sc(e.eventQueue_,t._path,i)}function sC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(sd)}function sT(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),tB(n,...t)}function sk(e,t,n,i){t&&t9(()=>{if("ok"===n)t(null);else{let e=(n||"error").toUpperCase(),r=e;i&&(r+=": "+i);let s=Error(r);s.code=e,t(s)}})}function sE(e,t,n){return rA(e.serverSyncTree_,t,n)||n9.EMPTY_NODE}function sS(e,t=e.transactionQueueTree_){if(t||sx(e,t),rJ(t)){let n=sN(e,t);E(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(e,t,n){let i=sE(e,t,n.map(e=>e.currentWriteId)),r=i,s=i.hash();for(let e=0;e<n.length;e++){let i=n[e];E(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;let s=nD(t,i.path);r=r.updateChild(s,i.currentOutputSnapshotRaw)}let o=r.val(!0);e.server_.put(t.toString(),o,i=>{sT(e,"transaction put response",{path:t.toString(),status:i});let r=[];if("ok"===i){let i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(rS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();sx(e,rY(e.transactionQueueTree_,t)),sS(e,e.transactionQueueTree_),su(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)t9(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{tK("transaction at "+t.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}sP(e,t)}},s)}(e,r1(t),n)}else rX(t)&&r0(t,t=>{sS(e,t)})}function sP(e,t){let n=sR(e,t),i=r1(n),r=sN(e,n);return function(e,t,n){if(0===t.length)return;let i=[],r=[],s=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){let a=t[o],l=nD(n,a.path),c=!1,u;if(E(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)c=!0,u=a.abortReason,r=r.concat(rS(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status){if(a.retryCount>=25)c=!0,u="maxretry",r=r.concat(rS(e.serverSyncTree_,a.currentWriteId,!0));else{let n=sE(e,a.path,s);a.currentInputSnapshot=n;let i=t[o].update(n.val());if(void 0!==i){r7("transaction failed: Data returned ",i,a.path);let t=ii(i);"object"==typeof i&&null!=i&&eo(i,".priority")||(t=t.updatePriority(n.getPriority()));let o=a.currentWriteId,l=rG(t,n,sm(e));a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=l,a.currentWriteId=sy(e),s.splice(s.indexOf(o),1),r=(r=r.concat(rE(e.serverSyncTree_,a.path,l,a.currentWriteId,a.applyLocally))).concat(rS(e.serverSyncTree_,o,!0))}else c=!0,u="nodata",r=r.concat(rS(e.serverSyncTree_,a.currentWriteId,!0))}}su(e.eventQueue_,n,r),r=[],c&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&("nodata"===u?i.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):i.push(()=>t[o].onComplete(Error(u),!1,null))))}sx(e,e.transactionQueueTree_);for(let e=0;e<i.length;e++)t9(i[e]);sS(e,e.transactionQueueTree_)}(e,r,i),i}function sR(e,t){let n;let i=e.transactionQueueTree_;for(n=nE(t);null!==n&&void 0===rJ(i);)i=rY(i,n),n=nE(t=nP(t));return i}function sN(e,t){let n=[];return function e(t,n,i){let r=rJ(n);if(r)for(let e=0;e<r.length;e++)i.push(r[e]);r0(n,n=>{e(t,n,i)})}(e,t,n),n.sort((e,t)=>e.order-t.order),n}function sx(e,t){let n=rJ(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,rQ(t,n.length>0?n:void 0)}r0(t,t=>{sx(e,t)})}function sA(e,t){let n=r1(sR(e,t)),i=rY(e.transactionQueueTree_,t);return!function(e,t,n){let i=e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{sO(e,t)}),sO(e,i),!function e(t,n,i,r){i&&!r&&n(t),r0(t,t=>{e(t,n,!0,r)}),i&&r&&n(t)}(i,t=>{sO(e,t)}),n}function sO(e,t){let n=rJ(t);if(n){let i=[],r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(E(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(E(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(rS(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,Error("set"),!1,null))));-1===s?rQ(t,void 0):n.length=s+1,su(e.eventQueue_,r1(t),r);for(let e=0;e<i.length;e++)t9(i[e])}}let sD=function(e,t){let n=sL(e),i=n.namespace;"firebase.com"===n.domain&&tG(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||tG("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||tZ();let r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new na(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new nT(n.pathString)}},sL=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t="",n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let i=n[e];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(u,h)));let d=function(e){let t={};for(let n of("?"===e.charAt(0)&&(e=e.substring(1)),e.split("&"))){if(0===n.length)continue;let i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):tK(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;let p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{let e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},sM="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",sF=function(){let e=0,t=[];return function(n){let i;let r=n===e;e=n;let s=Array(8);for(i=7;i>=0;i--)s[i]=sM.charAt(n%64),n=Math.floor(n/64);E(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=sM.charAt(t[i]);return E(20===o.length,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){let e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+en(this.snapshot.exportVal())}}class sj{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new z;return!function(e,t,n){e.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&function e(t,n){if(nO(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{let i=t.value;return t.value=null,i.forEachChild(n3,(e,n)=>{iT(t,new nT(e),n)}),e(t,n)}}if(!(t.children.size>0))return!0;{let i=nE(n);return n=nP(n),t.children.has(i)&&e(t.children.get(i),n)&&t.children.delete(i),0===t.children.size}}(e.onDisconnect_,t),sk(e,n,i,r)})}(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ss("OnDisconnect.remove",this._path);let e=new z;return sb(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ss("OnDisconnect.set",this._path),r8("OnDisconnect.set",e,this._path,!1);let t=new z;return sb(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ss("OnDisconnect.setWithPriority",this._path),r8("OnDisconnect.setWithPriority",e,this._path,!1),st("OnDisconnect.setWithPriority",t,!1);let n=new z;return!function(e,t,n,i,r){let s=ii(n,i);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,i)=>{"ok"===n&&iT(e.onDisconnect_,t,s),sk(e,r,n,i)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){ss("OnDisconnect.update",this._path),se("OnDisconnect.update",e,this._path,!1);let t=new z;return!function(e,t,n,i){if(el(n)){tB("onDisconnect().update() called with empty data.  Don't do anything."),sk(e,i,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(r,s)=>{"ok"===r&&t4(n,(n,i)=>{let r=ii(i);iT(e.onDisconnect_,nA(t,n),r)}),sk(e,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return nO(this._path)?null:nR(this._path)}get ref(){return new s$(this._repo,this._path)}get _queryIdentifier(){let e=t3(iw(this._queryParams));return"{}"===e?"default":e}get _queryObject(){return iw(this._queryParams)}isEqual(e){if(!((e=ek(e))instanceof sW))return!1;let t=this._repo===e._repo,n=nM(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function sV(e,t){if(!0===e._orderByCalled)throw Error(t+": You can't combine multiple orderBy calls.")}function sB(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===n$){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==tQ)throw Error(i);if("string"!=typeof t)throw Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==tX)throw Error(i);if("string"!=typeof n)throw Error(r)}}else if(e.getIndex()===n3){if(null!=t&&!r6(t)||null!=n&&!r6(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(E(e.getIndex() instanceof ir||e.getIndex()===io,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sH(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class s$ extends sW{constructor(e,t){super(e,t,new im,!1)}get parent(){let e=nx(this._path);return null===e?null:new s$(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class sG{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new nT(e),n=sY(this.ref,e);return new sG(this._node.getChild(t),n,n3)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,n)=>e(new sG(n,sY(this.ref,t),n3)))}hasChild(e){let t=new nT(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function sK(e,t){return(e=ek(e))._checkNotDeleted("ref"),void 0!==t?sY(e._root,t):e._root}function sZ(e,t){(e=ek(e))._checkNotDeleted("refFromURL");let n=sD(t,e._repo.repoInfo_.nodeAdmin);so("refFromURL",n);let i=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||i.host===e._repo.repoInfo_.host||tG("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),sK(e,n.path.toString())}function sY(e,t){return null===nE((e=ek(e))._path)?sr("child","path",t,!1):si("child","path",t,!1),new s$(e._repo,nA(e._path,t))}function sJ(e,t){ss("set",(e=ek(e))._path),r8("set",t,e._path,!1);let n=new z;return sw(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class sQ{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){let n=t._queryParams.getIndex();return new sU("value",this,new sG(e.snapshotNode,new s$(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sj(this,e,t):null}matches(e){return e instanceof sQ&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sX{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sj(this,e,t):null}createEvent(e,t){E(null!=e.childName,"Child events should have a childName.");let n=sY(new s$(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new sU(e.type,this,new sG(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof sX&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function s0(e,t,n,i,r){var s;let o,a;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){let t=n,i=(n,i)=>{sI(e._repo,e,c),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}let l=new sq(n,o||void 0),c="value"===t?new sQ(l):new sX(t,l);return s=e._repo,a=".info"===nE(e._path)?rx(s.infoSyncTree_,e,c):rx(s.serverSyncTree_,e,c),sc(s.eventQueue_,e._path,a),()=>sI(e._repo,e,c)}function s1(e,t,n,i){return s0(e,"value",t,n,i)}function s2(e,t,n,i){return s0(e,"child_added",t,n,i)}function s3(e,t,n,i){return s0(e,"child_changed",t,n,i)}function s5(e,t,n,i){return s0(e,"child_moved",t,n,i)}function s4(e,t,n,i){return s0(e,"child_removed",t,n,i)}function s6(e,t,n){let i=null,r=n?new sq(n):null;"value"===t?i=new sQ(r):t&&(i=new sX(t,r)),sI(e._repo,e,i)}class s8{}class s7 extends s8{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){r8("endAt",this._value,e._path,!0);let t=i_(e._queryParams,this._value,this._key);if(sH(t),sB(t),e._queryParams.hasEnd())throw Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sW(e._repo,e._path,t,e._orderByCalled)}}class s9 extends s8{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){var t,n,i;let r;r8("endBefore",this._value,e._path,!1);let s=(t=e._queryParams,n=this._value,i=this._key,(r=t.index_===n$||i?i_(t,n,i):i_(t,n,tQ)).endBeforeSet_=!0,r);if(sH(s),sB(s),e._queryParams.hasEnd())throw Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sW(e._repo,e._path,s,e._orderByCalled)}}class oe extends s8{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){r8("startAt",this._value,e._path,!0);let t=ig(e._queryParams,this._value,this._key);if(sH(t),sB(t),e._queryParams.hasStart())throw Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new sW(e._repo,e._path,t,e._orderByCalled)}}class ot extends s8{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){var t,n,i;let r;r8("startAfter",this._value,e._path,!1);let s=(t=e._queryParams,n=this._value,i=this._key,(r=t.index_===n$||i?ig(t,n,i):ig(t,n,tX)).startAfterSet_=!0,r);if(sH(s),sB(s),e._queryParams.hasStart())throw Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new sW(e._repo,e._path,s,e._orderByCalled)}}class on extends s8{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new sW(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class oi extends s8{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new sW(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class or extends s8{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){sV(e,"orderByChild");let t=new nT(this._path);if(nO(t))throw Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new ir(t),i=iv(e._queryParams,n);return sB(i),new sW(e._repo,e._path,i,!0)}}class os extends s8{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){sV(e,"orderByKey");let t=iv(e._queryParams,n$);return sB(t),new sW(e._repo,e._path,t,!0)}}class oo extends s8{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){sV(e,"orderByPriority");let t=iv(e._queryParams,n3);return sB(t),new sW(e._repo,e._path,t,!0)}}class oa extends s8{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){sV(e,"orderByValue");let t=iv(e._queryParams,io);return sB(t),new sW(e._repo,e._path,t,!0)}}class ol extends s8{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(r8("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new s7(this._value,this._key)._apply(new oe(this._value,this._key)._apply(e))}}function oc(e,...t){let n=ek(e);for(let e of t)n=e._apply(n);return n}E(!p,"__referenceConstructor has already been defined"),p=s$,E(!f,"__referenceConstructor has already been defined"),f=s$;let ou={};function oh(e,t,n,i,r){var s,o;let a,l,c,u,h=i||e.options.databaseURL;void 0===h&&(e.options.projectId||tG("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tB("Using default host for project ",e.options.projectId),h=`${e.options.projectId}-default-rtdb.firebaseio.com`);let d=sD(h,r),p=d.repoInfo;void 0!==tP&&tP.env&&(c=tP.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,p=(d=sD(h=`http://${c}?ns=${p.namespace}`,r)).repoInfo):u=!d.repoInfo.secure;let f=r&&u?new ni(ni.OWNER):new nn(e.name,e.options,t);return so("Invalid Firebase Database URL",d),nO(d.path)||tG("Database URL must point to the root of a Firebase Database (not including a child path)."),new od((s=p,o=new nt(e.name,n),(a=ou[e.name])||(a={},ou[e.name]=a),(l=a[s.toURLString()])&&tG("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new sp(s,!1,f,o),a[s.toURLString()]=l,l),e)}class od{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=nd(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ib(e.repoInfo_,(t,n,i,r)=>{sg(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>s_(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{en(n)}catch(e){throw Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new nW(e.repoInfo_,t,(t,n,i,r)=>{sg(e,t,n,i,r)},t=>{s_(e,t)},t=>{t4(t,(t,n)=>{sv(e,t,n)})},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){let n=e.toString();return nh[n]||(nh[n]=t()),nh[n]}(e.repoInfo_,()=>new iS(e.stats_,e.server_)),e.infoData_=new iI,e.infoSyncTree_=new rk({startListening:(t,n,i,r)=>{let s=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=rP(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),sv(e,"connected",!1),e.serverSyncTree_=new rk({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{let s=r(n,i);su(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new s$(this._repo,nk())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){let n=ou[t];n&&n[e.key]===e||tG(`Database ${t}(${e.repoInfo_}) has already been deleted.`),sC(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&tG("Cannot call "+e+" on a deleted database.")}}function op(){ny.IS_TRANSPORT_INITIALIZED&&tK("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function of(){op(),nm.forceDisallow()}function om(){op(),nv.forceDisallow(),nm.forceAllow()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}nW.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},nW.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},tx=ts,e6(new eE("database",(e,{instanceIdentifier:t})=>oh(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),th(tR,tN,void 0),th(tR,tN,"esm2017");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o_=new eL("@firebase/database-compat"),ov=function(e){o_.warn("FIREBASE WARNING: "+e)},oy=function(e,t,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw Error(ew(e,t)+"must be a boolean.")},ow=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error(ew(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this._delegate=e}cancel(e){ey("OnDisconnect.cancel",0,1,arguments.length),eb("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){ey("OnDisconnect.remove",0,1,arguments.length),eb("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){ey("OnDisconnect.set",1,2,arguments.length),eb("OnDisconnect.set","onComplete",t,!0);let n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){ey("OnDisconnect.setWithPriority",2,3,arguments.length),eb("OnDisconnect.setWithPriority","onComplete",n,!0);let i=this._delegate.setWithPriority(e,t);return n&&i.then(()=>n(null),e=>n(e)),i}update(e,t){if(ey("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,ov("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eb("OnDisconnect.update","onComplete",t,!0);let n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return ey("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this._database=e,this._delegate=t}val(){return ey("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ey("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ey("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ey("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return ey("DataSnapshot.child",0,1,arguments.length),si("DataSnapshot.child","path",e=String(e),!1),new oC(this._database,this._delegate.child(e))}hasChild(e){return ey("DataSnapshot.hasChild",1,1,arguments.length),si("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return ey("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return ey("DataSnapshot.forEach",1,1,arguments.length),eb("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new oC(this._database,t)))}hasChildren(){return ey("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ey("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ey("DataSnapshot.ref",0,0,arguments.length),new ok(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class oT{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,i){var r;ey("Query.on",2,4,arguments.length),eb("Query.on","callback",t,!1);let s=oT.getCancelAndContextArgs_("Query.on",n,i),o=(e,n)=>{t.call(s.context,new oC(this.database,e),n)};o.userCallback=t,o.context=s.context;let a=null===(r=s.cancel)||void 0===r?void 0:r.bind(s.context);switch(e){case"value":return s1(this._delegate,o,a),t;case"child_added":return s2(this._delegate,o,a),t;case"child_removed":return s4(this._delegate,o,a),t;case"child_changed":return s3(this._delegate,o,a),t;case"child_moved":return s5(this._delegate,o,a),t;default:throw Error(ew("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(ey("Query.off",0,3,arguments.length),ow("Query.off",e,!0),eb("Query.off","callback",t,!0),eI("Query.off","context",n,!0),t){let i=()=>{};i.userCallback=t,i.context=n,s6(this._delegate,e,i)}else s6(this._delegate,e)}get(){return(function(e){e=ek(e);let t=new sQ(new sq(()=>{}));return(function(e,t,n){let i=function(e,t){var n;let i=t._path,r=null;e.syncPointTree_.foreachOnPath(i,(e,t)=>{let n=nD(e,i);r=r||rw(t,n)});let s=e.syncPointTree_.get(i);s?r=r||rw(s,nk()):(s=new rg,e.syncPointTree_=e.syncPointTree_.set(i,s));let o=null!=r,a=o?new iL(r,!0,!1):null,l=(n=e.pendingWriteTree_,re(t._path,n));return iz(rv(s,t,l,o?a.getNode():n9.EMPTY_NODE,o).viewCache_)}(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then(i=>{let r;let s=ii(i).withIndex(t._queryParams.getIndex());if(rx(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())r=rP(e.serverSyncTree_,t._path,s);else{let n=rL(e.serverSyncTree_,t);r=rN(e.serverSyncTree_,t._path,s,n)}return su(e.eventQueue_,t._path,r),rR(e.serverSyncTree_,t,n,null,!0),s},n=>(sT(e,"get for query "+en(t)+" failed: "+n),Promise.reject(Error(n))))})(e._repo,e,t).then(t=>new sG(t,new s$(e._repo,e._path),e._queryParams.getIndex()))})(this._delegate).then(e=>new oC(this.database,e))}once(e,t,n,i){ey("Query.once",1,4,arguments.length),eb("Query.once","callback",t,!0);let r=oT.getCancelAndContextArgs_("Query.once",n,i),s=new z,o=(e,n)=>{let i=new oC(this.database,e);t&&t.call(r.context,i,n),s.resolve(i)};o.userCallback=t,o.context=r.context;let a=e=>{r.cancel&&r.cancel.call(r.context,e),s.reject(e)};switch(e){case"value":s1(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":s2(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":s4(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":s3(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":s5(this._delegate,o,a,{onlyOnce:!0});break;default:throw Error(ew("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return ey("Query.limitToFirst",1,1,arguments.length),new oT(this.database,oc(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToFirst: First argument must be a positive integer.");return new on(e)}(e)))}limitToLast(e){return ey("Query.limitToLast",1,1,arguments.length),new oT(this.database,oc(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToLast: First argument must be a positive integer.");return new oi(e)}(e)))}orderByChild(e){return ey("Query.orderByChild",1,1,arguments.length),new oT(this.database,oc(this._delegate,function(e){if("$key"===e)throw Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return si("orderByChild","path",e,!1),new or(e)}(e)))}orderByKey(){return ey("Query.orderByKey",0,0,arguments.length),new oT(this.database,oc(this._delegate,new os))}orderByPriority(){return ey("Query.orderByPriority",0,0,arguments.length),new oT(this.database,oc(this._delegate,new oo))}orderByValue(){return ey("Query.orderByValue",0,0,arguments.length),new oT(this.database,oc(this._delegate,new oa))}startAt(e=null,t){return ey("Query.startAt",0,2,arguments.length),new oT(this.database,oc(this._delegate,function(e=null,t){return sn("startAt","key",t,!0),new oe(e,t)}(e,t)))}startAfter(e=null,t){return ey("Query.startAfter",0,2,arguments.length),new oT(this.database,oc(this._delegate,(sn("startAfter","key",t,!0),new ot(e,t))))}endAt(e=null,t){return ey("Query.endAt",0,2,arguments.length),new oT(this.database,oc(this._delegate,(sn("endAt","key",t,!0),new s7(e,t))))}endBefore(e=null,t){return ey("Query.endBefore",0,2,arguments.length),new oT(this.database,oc(this._delegate,(sn("endBefore","key",t,!0),new s9(e,t))))}equalTo(e,t){return ey("Query.equalTo",1,2,arguments.length),new oT(this.database,oc(this._delegate,(sn("equalTo","key",t,!0),new ol(e,t))))}toString(){return ey("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ey("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(ey("Query.isEqual",1,1,arguments.length),!(e instanceof oT))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){let i={cancel:void 0,context:void 0};if(t&&n)i.cancel=t,eb(e,"cancel",i.cancel,!0),i.context=n,eI(e,"context",i.context,!0);else if(t){if("object"==typeof t&&null!==t)i.context=t;else if("function"==typeof t)i.cancel=t;else throw Error(ew(e,"cancelOrContext")+" must either be a cancel callback or a context object.")}return i}get ref(){return new ok(this.database,new s$(this._delegate._repo,this._delegate._path))}}class ok extends oT{constructor(e,t){super(e,new sW(t._repo,t._path,new im,!1)),this.database=e,this._delegate=t}getKey(){return ey("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return ey("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ok(this.database,sY(this._delegate,e))}getParent(){ey("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new ok(this.database,e):null}getRoot(){return ey("Reference.root",0,0,arguments.length),new ok(this.database,this._delegate.root)}set(e,t){ey("Reference.set",1,2,arguments.length),eb("Reference.set","onComplete",t,!0);let n=sJ(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if(ey("Reference.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,ov("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ss("Reference.update",this._delegate._path),eb("Reference.update","onComplete",t,!0);let n=function(e,t){se("update",t,e._path,!1);let n=new z;return!function(e,t,n,i){sT(e,"update",{path:t.toString(),value:n});let r=!0,s=sm(e),o={};if(t4(n,(n,i)=>{r=!1,o[n]=r$(nA(t,n),ii(i),e.serverSyncTree_,s)}),r)tB("update() called with empty data.  Don't do anything."),sk(e,i,"ok",void 0);else{let r=sy(e),s=function(e,t,n,i){var r;E(i>(r=e.pendingWriteTree_).lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:n,writeId:i,visible:!0}),r.visibleWrites=iG(r.visibleWrites,t,n),r.lastWriteId=i;let s=iB.fromObject(n);return rO(e,new iD(iP(),t,s))}(e.serverSyncTree_,t,o,r);sl(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{let o="ok"===n;o||tK("update at "+t+" failed: "+n);let a=rS(e.serverSyncTree_,r,!o),l=a.length>0?sP(e,t):t;su(e.eventQueue_,l,a),sk(e,i,n,s)}),t4(n,n=>{let i=sA(e,nA(t,n));sP(e,i)}),su(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){ey("Reference.setWithPriority",2,3,arguments.length),eb("Reference.setWithPriority","onComplete",n,!0);let i=function(e,t,n){if(ss("setWithPriority",e._path),r8("setWithPriority",t,e._path,!1),st("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";let i=new z;return sw(e._repo,e._path,t,n,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return n&&i.then(()=>n(null),e=>n(e)),i}remove(e){var t;ey("Reference.remove",0,1,arguments.length),eb("Reference.remove","onComplete",e,!0);let n=(ss("remove",(t=this._delegate)._path),sJ(t,null));return e&&n.then(()=>e(null),t=>e(t)),n}transaction(e,t,n){ey("Reference.transaction",1,3,arguments.length),eb("Reference.transaction","transactionUpdate",e,!1),eb("Reference.transaction","onComplete",t,!0),oy("Reference.transaction","applyLocally",n,!0);let i=(function(e,t,n){var i;if(ss("Reference.transaction",(e=ek(e))._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";let r=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i,s=new z,o=s1(e,()=>{});return!function(e,t,n,i,r,s){sT(e,"transaction on "+t);let o={path:t,update:n,onComplete:i,status:null,order:tU(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=sE(e,t,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{let n;r7("transaction failed: Data returned ",l,o.path),o.status=0;let i=rY(e.transactionQueueTree_,t),r=rJ(i)||[];r.push(o),rQ(i,r),"object"==typeof l&&null!==l&&eo(l,".priority")?E(r6(n=ea(l,".priority")),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null."):n=(rA(e.serverSyncTree_,t)||n9.EMPTY_NODE).getPriority().val();let s=sm(e),c=ii(l,n),u=rG(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=sy(e);let h=rE(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);su(e.eventQueue_,t,h),sS(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(t,n,i)=>{let r=null;t?s.reject(t):(r=new sG(i,new s$(e._repo,e._path),n3),s.resolve(new og(n,r)))},o,r),s.promise})(this._delegate,e,{applyLocally:n}).then(e=>new oI(e.committed,new oC(this.database,e.snapshot)));return t&&i.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),i}setPriority(e,t){ey("Reference.setPriority",1,2,arguments.length),eb("Reference.setPriority","onComplete",t,!0);let n=function(e,t){ss("setPriority",(e=ek(e))._path),st("setPriority",t,!1);let n=new z;return sw(e._repo,nA(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){ey("Reference.push",0,2,arguments.length),eb("Reference.push","onComplete",t,!0);let n=function(e,t){let n;ss("push",(e=ek(e))._path),r8("push",t,e._path,!0);let i=sF(sf(e._repo)),r=sY(e,i),s=sY(e,i);return n=null!=t?sJ(s,t).then(()=>s):Promise.resolve(s),r.then=n.then.bind(n),r.catch=n.then.bind(n,void 0),r}(this._delegate,e),i=n.then(e=>new ok(this.database,e));t&&i.then(()=>t(null),e=>t(e));let r=new ok(this.database,n);return r.then=i.then.bind(i),r.catch=i.catch.bind(i,void 0),r}onDisconnect(){return ss("Reference.onDisconnect",this._delegate._path),new ob(new sz(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:of,forceLongPolling:om}}useEmulator(e,t,n={}){!function(e,t,n,i={}){var r;let s;(e=ek(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&tG("Cannot call useEmulator() after instance has already been initialized.");let o=e._repoInternal;o.repoInfo_.nodeAdmin?(i.mockUserToken&&tG('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ni(ni.OWNER)):i.mockUserToken&&(s=new ni("string"==typeof i.mockUserToken?i.mockUserToken:/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[O(JSON.stringify({alg:"none",type:"JWT"})),O(JSON.stringify(s)),""].join(".")}(i.mockUserToken,e.app.options.projectId))),r=s,o.repoInfo_=new na(`${t}:${n}`,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams,!0),r&&(o.authTokenProvider_=r)}(this._delegate,e,t,n)}ref(e){return(ey("database.ref",0,1,arguments.length),e instanceof ok)?new ok(this,sZ(this._delegate,e.toString())):new ok(this,sK(this._delegate,e))}refFromURL(e){return ey("database.refFromURL",1,1,arguments.length),new ok(this,sZ(this._delegate,e))}goOffline(){var e;return ey("database.goOffline",0,0,arguments.length),void((e=ek(e=this._delegate))._checkNotDeleted("goOffline"),sC(e._repo))}goOnline(){var e,t;return ey("database.goOnline",0,0,arguments.length),void((e=ek(e=this._delegate))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(sd))}}oE.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>({".sv":{increment:e}})};var oS=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){let a;tx=n;let l=new eR("database-standalone"),c=new eP("auth-internal",l);return c.setComponent(new eE("auth-internal",()=>i,"PRIVATE")),r&&(a=new eP("app-check-internal",l)).setComponent(new eE("app-check-internal",()=>r,"PRIVATE")),{instance:new oE(oh(e,c,a,t,o),e),namespace:s}}});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oP=oE.ServerValue;function oR(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}tE.INTERNAL.registerComponent(new eE("database-compat",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app-compat").getImmediate();return new oE(e.getProvider("database").getImmediate({identifier:t}),n)},"PUBLIC").setServiceProps({Reference:ok,Query:oT,Database:oE,DataSnapshot:oC,enableLogging:function(e,t){tV(e,t)},INTERNAL:oS,ServerValue:oP}).setMultipleInstances(!0)),tE.registerVersion("@firebase/database-compat","1.0.6"),"function"==typeof SuppressedError&&SuppressedError;let oN={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"};function ox(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let oA=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},oO=new X("auth","Firebase",ox()),oD=new eL("@firebase/auth");function oL(e,...t){oD.logLevel<=b.ERROR&&oD.error(`Auth (${ts}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(e,...t){throw oz(e,...t)}function oF(e,...t){return oz(e,...t)}function oU(e,t,n){return new X("auth","Firebase",Object.assign(Object.assign({},ox()),{[t]:n})).create(t,{appName:e.name})}function oj(e){return oU(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oq(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&oM(e,"argument-error"),oU(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oz(e,...t){if("string"!=typeof e){let n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return oO.create(e,...t)}function oW(e,t,...n){if(!e)throw oz(t,...n)}function oV(e){let t="INTERNAL ASSERTION FAILED: "+e;throw oL(t),Error(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function oH(){return"http:"===o$()||"https:"===o$()}function o$(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(e,t){var n;this.shortDelay=e,this.longDelay=t,n="Short delay should be less than long delay!",t>e||oV(n),this.isMobile=V()||K()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(oH()||G()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oK(e,t){var n,i;n=e.emulator,i="Emulator should always be set here",n||oV(i);let{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void oV("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void oV("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void oV("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oJ=new oG(3e4,6e4);function oQ(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function oX(e,t,n,i,r={}){return o0(e,r,async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});let o=ed(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),oZ.fetch()(o2(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))})}async function o0(e,t,n){e._canInitEmulator=!1;let i=Object.assign(Object.assign({},oY),t);try{let t=new o3(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let s=await r.json();if("needConfirmation"in s)throw o5(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{let[t,n]=(r.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw o5(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw o5(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw o5(e,"user-disabled",s);let o=i[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(n)throw oU(e,o,n);oM(e,o)}}catch(t){if(t instanceof Q)throw t;oM(e,"network-request-failed",{message:String(t)})}}async function o1(e,t,n,i,r={}){let s=await oX(e,t,n,i,r);return"mfaPendingCredential"in s&&oM(e,"multi-factor-auth-required",{_serverResponse:s}),s}function o2(e,t,n,i){let r=`${t}${n}?${i}`;return e.config.emulator?oK(e.config,r):`${e.config.apiScheme}://${r}`}class o3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(oF(this.auth,"network-request-failed")),oJ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function o5(e,t,n){let i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=oF(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(e){return void 0!==e&&void 0!==e.getResponse}function o6(e){return void 0!==e&&void 0!==e.enterprise}class o8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return function(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(e){return(await oX(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function o9(e,t){return oX(e,"GET","/v2/recaptchaConfig",oQ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ae(e,t){return oX(e,"POST","/v1/accounts:delete",t)}async function at(e,t){return oX(e,"POST","/v1/accounts:update",t)}async function an(e,t){return oX(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function ar(e,t=!1){let n=ek(e),i=await n.getIdToken(t),r=ao(i);oW(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ai(as(r.auth_time)),issuedAtTime:ai(as(r.iat)),expirationTime:ai(as(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function as(e){return 1e3*Number(e)}function ao(e){let[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return oL("JWT malformed, contained fewer than 3 sections"),null;try{let e=D(n);if(!e)return oL("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return oL("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function aa(e){let t=ao(e);return oW(t,"internal-error"),oW(void 0!==t.exp,"internal-error"),oW(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Q&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ai(this.lastLoginAt),this.creationTime=ai(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(e){var t;let n=e.auth,i=await e.getIdToken(),r=await al(e,an(n,{idToken:i}));oW(null==r?void 0:r.users.length,n,"internal-error");let s=r.users[0];e._notifyReloadListener(s);let o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ap(s.providerUserInfo):[],a=[...e.providerData.filter(e=>!o.some(t=>t.providerId===e.providerId)),...o],l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null==a?void 0:a.length);Object.assign(e,{uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new au(s.createdAt,s.lastLoginAt),isAnonymous:!!l&&c})}async function ad(e){let t=ek(e);await ah(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ap(e){return e.map(e=>{var{providerId:t}=e,n=oR(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(e,t){let n=await o0(e,{},async()=>{let n=ed({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=o2(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",oZ.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function am(e,t){return oX(e,"POST","/v2/accounts:revokeToken",oQ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oW(e.idToken,"internal-error"),oW(void 0!==e.idToken,"internal-error"),oW(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):aa(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oW(0!==e.length,"internal-error");let t=aa(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(oW(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:i,expiresIn:r}=await af(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){let{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new ag;return n&&(oW("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(oW("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(oW("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ag,this.toJSON())}_performRefresh(){return oV("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(e,t){oW("string"==typeof e||void 0===e,"internal-error",{appName:t})}class av{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=oR(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ac(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new au(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await al(this,this.stsTokenManager.getToken(this.auth,e));return oW(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ar(this,e)}reload(){return ad(this)}_assign(e){this!==e&&(oW(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new av(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oW(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ah(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(te(this.auth.app))return Promise.reject(oj(this.auth));let e=await this.getIdToken();return await al(this,ae(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;let u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,_=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:y,isAnonymous:w,providerData:b,stsTokenManager:I}=t;oW(v&&I,e,"internal-error");let C=ag.fromJSON(this.name,I);oW("string"==typeof v,e,"internal-error"),a_(u,e.name),a_(h,e.name),oW("boolean"==typeof y,e,"internal-error"),oW("boolean"==typeof w,e,"internal-error"),a_(d,e.name),a_(p,e.name),a_(f,e.name),a_(m,e.name),a_(g,e.name),a_(_,e.name);let T=new av({uid:v,auth:e,email:h,emailVerified:y,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:C,createdAt:g,lastLoginAt:_});return b&&Array.isArray(b)&&(T.providerData=b.map(e=>Object.assign({},e))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){let i=new ag;i.updateFromServerResponse(t);let r=new av({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ah(r),r}static async _fromGetAccountInfoResponse(e,t,n){let i=t.users[0];oW(void 0!==i.localId,"internal-error");let r=void 0!==i.providerUserInfo?ap(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null==r?void 0:r.length),o=new ag;o.updateFromIdToken(n);let a=new av({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s});return Object.assign(a,{uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new au(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null==r?void 0:r.length)}),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ay=new Map;function aw(e){var t,n;t="Expected a class definition",e instanceof Function||oV(t);let i=ay.get(e);return i?(n="Instance stored in cache mismatched with class",i instanceof e||oV(n)):(i=new e,ay.set(e,i)),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(e,t,n){return`firebase:${e}:${t}:${n}`}ab.type="NONE";class aC{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:i,name:r}=this.auth;this.fullUserKey=aI(this.userKey,i.apiKey,r),this.fullPersistenceKey=aI("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?av._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new aC(aw(ab),e,n);let i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),r=i[0]||aw(ab),s=aI(n,e.config.apiKey,e.name),o=null;for(let n of t)try{let t=await n._get(s);if(t){let i=av._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}let a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length&&(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new aC(r,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aP(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";{if(t.includes("edge/"))return"Edge";if(ak(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(aN(t))return"Blackberry";if(ax(t))return"Webos";if(aE(t))return"Safari";if((t.includes("chrome/")||aS(t))&&!t.includes("edge/"))return"Chrome";if(aR(t))return"Android";let n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==n?void 0:n.length)===2)return n[1]}return"Other"}function ak(e=W()){return/firefox\//i.test(e)}function aE(e=W()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function aS(e=W()){return/crios\//i.test(e)}function aP(e=W()){return/iemobile/i.test(e)}function aR(e=W()){return/android/i.test(e)}function aN(e=W()){return/blackberry/i.test(e)}function ax(e=W()){return/webos/i.test(e)}function aA(e=W()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function aO(e=W()){return aA(e)||aR(e)||ax(e)||aN(e)||/windows phone/i.test(e)||aP(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(e,t=[]){let n;switch(e){case"Browser":n=aT(W());break;case"Worker":n=`${aT(W())}-${e}`;break;default:n=e}let i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ts}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,i)=>{try{let i=e(t);n(i)}catch(e){i(e)}});n.onAbort=t,this.queue.push(n);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(e,t={}){return oX(e,"GET","/v2/passwordPolicy",oQ(e,t))}class aF{constructor(e){var t,n,i,r;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;let a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aj(this),this.idTokenSubscription=new aj(this),this.beforeStateQueue=new aL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=aw(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await aC.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await an(this,{idToken:e}),n=await av._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(te(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);(!n||n===s)&&(null==o?void 0:o.user)&&(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return(oW(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ah(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(te(this.app))return Promise.reject(oj(this));let t=e?ek(e):null;return t&&oW(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oW(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return te(this.app)?Promise.reject(oj(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return te(this.app)?Promise.reject(oj(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(aw(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new aF(await aM(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new X("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await am(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&aw(e)||this._popupRedirectResolver;oW(t,this,"argument-error"),this.redirectPersistenceManager=await aC.create(this,[aw(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};let r="function"==typeof t?t:t.next.bind(t),s=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(oW(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"==typeof t){let r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{let n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oW(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;let t=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){oD.logLevel<=b.WARN&&oD.warn(`Auth (${ts}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}class aj{constructor(e){this.auth=e,this.observer=null,this.addObserver=eg(e=>this.observer=e)}get next(){return oW(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aq={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function az(e){return aq.loadJS(e)}function aW(e){return`__${e}${Math.floor(1e6*Math.random())}`}class aV{constructor(e){this.type="recaptcha-enterprise",this.auth=ek(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{o9(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0===i.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{let n=new o8(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function i(t,n,i){let r=window.grecaptcha;o6(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{n(this.auth).then(n=>{if(!t&&o6(window.grecaptcha))i(n,e,r);else{if("undefined"==typeof window){r(Error("RecaptchaVerifier is only supported in browser"));return}let t=aq.recaptchaEnterpriseScript;0!==t.length&&(t+=n),az(t).then(()=>{i(n,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function aB(e,t,n,i=!1){let r;let s=new aV(e);try{r=await s.verify(n)}catch(e){r=await s.verify(n,!0)}let o=Object.assign({},t);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function aH(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r||!r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return i(e,t).catch(async r=>{if("auth/missing-recaptcha-token"!==r.code)return Promise.reject(r);{console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let r=await aB(e,t,n,"getOobCode"===n);return i(e,r)}});{let r=await aB(e,t,n,"getOobCode"===n);return i(e,r)}}function a$(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function aG(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oV("not implemented")}_getIdTokenResponse(e){return oV("not implemented")}_linkToIdToken(e,t){return oV("not implemented")}_getReauthenticationResolver(e){return oV("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aZ(e,t){return oX(e,"POST","/v1/accounts:resetPassword",oQ(e,t))}async function aY(e,t){return oX(e,"POST","/v1/accounts:update",t)}async function aJ(e,t){return oX(e,"POST","/v1/accounts:signUp",t)}async function aQ(e,t){return oX(e,"POST","/v1/accounts:update",oQ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aX(e,t){return o1(e,"POST","/v1/accounts:signInWithPassword",oQ(e,t))}async function a0(e,t){return oX(e,"POST","/v1/accounts:sendOobCode",oQ(e,t))}async function a1(e,t){return a0(e,t)}async function a2(e,t){return a0(e,t)}async function a3(e,t){return a0(e,t)}async function a5(e,t){return a0(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(e,t){return o1(e,"POST","/v1/accounts:signInWithEmailLink",oQ(e,t))}async function a6(e,t){return o1(e,"POST","/v1/accounts:signInWithEmailLink",oQ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8 extends aK{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new a8(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new a8(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return aH(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",aX);case"emailLink":return a4(e,{email:this._email,oobCode:this._password});default:oM(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return aH(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aJ);case"emailLink":return a6(e,{idToken:t,email:this._email,oobCode:this._password});default:oM(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a7(e,t){return o1(e,"POST","/v1/accounts:signInWithIdp",oQ(e,t))}class a9 extends aK{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new a9(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oM("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=oR(t,["providerId","signInMethod"]);if(!n||!i)return null;let s=new a9(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return a7(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,a7(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,a7(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ed(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function le(e,t){return oX(e,"POST","/v1/accounts:sendVerificationCode",oQ(e,t))}async function lt(e,t){return o1(e,"POST","/v1/accounts:signInWithPhoneNumber",oQ(e,t))}async function ln(e,t){let n=await o1(e,"POST","/v1/accounts:signInWithPhoneNumber",oQ(e,t));if(n.temporaryProof)throw o5(e,"account-exists-with-different-credential",n);return n}let li={USER_NOT_FOUND:"user-not-found"};async function lr(e,t){return o1(e,"POST","/v1/accounts:signInWithPhoneNumber",oQ(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),li)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends aK{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ls({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ls({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return lt(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return ln(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return lr(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new ls({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class lo{constructor(e){var t,n,i,r,s,o;let a=ep(ef(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);oW(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){let t=function(e){let t=ep(ef(e)).link,n=t?ep(ef(t)).deep_link_id:null,i=ep(ef(e)).deep_link_id;return(i?ep(ef(i)).link:null)||i||n||t||e}(e);try{return new lo(t)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.providerId=la.PROVIDER_ID}static credential(e,t){return a8._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=lo.parseLink(t);return oW(n,"argument-error"),a8._fromEmailAndCode(e,n.code,n.tenantId)}}la.PROVIDER_ID="password",la.EMAIL_PASSWORD_SIGN_IN_METHOD="password",la.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends ll{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class lu extends lc{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return oW("providerId"in t&&"signInMethod"in t,"argument-error"),a9._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return oW(e.idToken||e.accessToken,"argument-error"),a9._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return lu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return lu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=e;if(!n&&!i&&!t&&!r||!o)return null;try{return new lu(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends lc{constructor(){super("facebook.com")}static credential(e){return a9._fromParams({providerId:lh.PROVIDER_ID,signInMethod:lh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lh.credentialFromTaggedObject(e)}static credentialFromError(e){return lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lh.credential(e.oauthAccessToken)}catch(e){return null}}}lh.FACEBOOK_SIGN_IN_METHOD="facebook.com",lh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return a9._fromParams({providerId:ld.PROVIDER_ID,signInMethod:ld.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ld.credentialFromTaggedObject(e)}static credentialFromError(e){return ld.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ld.credential(t,n)}catch(e){return null}}}ld.GOOGLE_SIGN_IN_METHOD="google.com",ld.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends lc{constructor(){super("github.com")}static credential(e){return a9._fromParams({providerId:lp.PROVIDER_ID,signInMethod:lp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lp.credentialFromTaggedObject(e)}static credentialFromError(e){return lp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lp.credential(e.oauthAccessToken)}catch(e){return null}}}lp.GITHUB_SIGN_IN_METHOD="github.com",lp.PROVIDER_ID="github.com";class lf extends aK{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return a7(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,a7(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,a7(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let{providerId:t,signInMethod:n,pendingToken:i}="string"==typeof e?JSON.parse(e):e;return t&&n&&i&&t===n?new lf(t,i):null}static _create(e,t){return new lf(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lm extends ll{constructor(e){oW(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return lm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=lf.fromJSON(e);return oW(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return lf._create(n,t)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends lc{constructor(){super("twitter.com")}static credential(e,t){return a9._fromParams({providerId:lg.PROVIDER_ID,signInMethod:lg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lg.credentialFromTaggedObject(e)}static credentialFromError(e){return lg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return lg.credential(t,n)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(e,t){return o1(e,"POST","/v1/accounts:signUp",oQ(e,t))}lg.TWITTER_SIGN_IN_METHOD="twitter.com",lg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){return new lv({user:await av._fromIdTokenResponse(e,n,i),providerId:ly(n),_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){return await e._updateTokensIfNecessary(n,!0),new lv({user:e,providerId:ly(n),_tokenResponse:n,operationType:t})}}function ly(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(e){var t;if(te(e.app))return Promise.reject(oj(e));let n=ek(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new lv({user:n.currentUser,providerId:null,operationType:"signIn"});let i=await l_(n,{returnSecureToken:!0}),r=await lv._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb extends Q{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,lb.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new lb(e,t,n,i)}}function lI(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw lb._fromErrorAndOperation(e,n,t,i);throw n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(e,t){let n=ek(e);await lE(!0,n,t);let{providerUserInfo:i}=await at(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=lC(i||[]);return n.providerData=n.providerData.filter(e=>r.has(e.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function lk(e,t,n=!1){let i=await al(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return lv._forOperation(e,"link",i)}async function lE(e,t,n){await ah(t),oW(lC(t.providerData).has(n)===e,t.auth,!1===e?"provider-already-linked":"no-such-provider")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(e,t,n=!1){let{auth:i}=e;if(te(i.app))return Promise.reject(oj(i));let r="reauthenticate";try{let s=await al(e,lI(i,r,t,e),n);oW(s.idToken,i,"internal-error");let o=ao(s.idToken);oW(o,i,"internal-error");let{sub:a}=o;return oW(e.uid===a,i,"user-mismatch"),lv._forOperation(e,r,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&oM(i,"user-mismatch"),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lP(e,t,n=!1){if(te(e.app))return Promise.reject(oj(e));let i="signIn",r=await lI(e,i,t),s=await lv._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function lR(e,t){return lP(ek(e),t)}async function lN(e,t){let n=ek(e);return await lE(!1,n,t.providerId),lk(n,t)}async function lx(e,t){return lS(ek(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(e,t){return o1(e,"POST","/v1/accounts:signInWithCustomToken",oQ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(e,t){if(te(e.app))return Promise.reject(oj(e));let n=ek(e),i=await lA(n,{token:t,returnSecureToken:!0}),r=await lv._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?lL._fromServerResponse(e,t):"totpInfo"in t?lM._fromServerResponse(e,t):oM(e,"internal-error")}}class lL extends lD{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new lL(t)}}class lM extends lD{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new lM(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(e,t,n){var i;oW((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),oW(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(oW(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(oW(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(e){let t=ek(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function lj(e,t,n){let i=ek(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&lF(i,r,n),await aH(i,r,"getOobCode",a2)}async function lq(e,t,n){await aZ(ek(e),{oobCode:t,newPassword:n}).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&lU(e),t})}async function lz(e,t){await aQ(ek(e),{oobCode:t})}async function lW(e,t){let n=ek(e),i=await aZ(n,{oobCode:t}),r=i.requestType;switch(oW(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oW(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oW(i.mfaInfo,n,"internal-error");default:oW(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=lD._fromServerResponse(ek(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function lV(e,t){let{data:n}=await lW(ek(e),t);return n.email}async function lB(e,t,n){if(te(e.app))return Promise.reject(oj(e));let i=ek(e),r=aH(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l_),s=await r.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&lU(e),t}),o=await lv._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lH(e,t,n){let i=ek(e),r={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};oW(n.handleCodeInApp,i,"argument-error"),n&&lF(i,r,n),await aH(i,r,"getOobCode",a3)}async function l$(e,t,n){if(te(e.app))return Promise.reject(oj(e));let i=ek(e),r=la.credentialWithLink(t,n||oB());return oW(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),lR(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lG(e,t){return oX(e,"POST","/v1/accounts:createAuthUri",oQ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lK(e,t){let n=oH()?oB():"http://localhost",{signinMethods:i}=await lG(ek(e),{identifier:t,continueUri:n});return i||[]}async function lZ(e,t){let n=ek(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&lF(n.auth,i,t);let{email:r}=await a1(n.auth,i);r!==e.email&&await e.reload()}async function lY(e,t,n){let i=ek(e),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&lF(i.auth,r,n);let{email:s}=await a5(i.auth,r);s!==e.email&&await e.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lJ(e,t){return oX(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lQ(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;let i=ek(e),r=await i.getIdToken(),s=await al(i,lJ(i.auth,{idToken:r,displayName:t,photoUrl:n,returnSecureToken:!0}));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;let o=i.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function lX(e,t,n){let{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);let s=await al(e,aY(i,r));await e._updateTokensIfNecessary(s,!0)}class l0{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class l1 extends l0{constructor(e,t,n,i){super(e,t,n),this.username=i}}class l2 extends l0{constructor(e,t){super(e,"facebook.com",t)}}class l3 extends l1{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class l5 extends l0{constructor(e,t){super(e,"google.com",t)}}class l4 extends l1{constructor(e,t,n){super(e,"twitter.com",t,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new l6("enroll",e,t)}static _fromMfaPendingCredential(e){return new l6("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return l6._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return l6._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){let n=ek(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map(e=>lD._fromServerResponse(n,e));oW(i.mfaPendingCredential,n,"internal-error");let s=l6._fromMfaPendingCredential(i.mfaPendingCredential);return new l8(s,r,async e=>{let r=await e._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;let o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":let a=await lv._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(a.user),a;case"reauthenticate":return oW(t.user,n,"internal-error"),lv._forOperation(t.user,t.operationType,o);default:oM(n,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}class l7{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>lD._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new l7(e)}async getSession(){return l6._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){let n=await this.getSession(),i=await al(this.user,e._process(this.user.auth,n,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){let t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{var i,r;let e=await al(this.user,(i=this.user.auth,r={idToken:n,mfaEnrollmentId:t},oX(i,"POST","/v2/accounts/mfaEnrollment:withdraw",oQ(i,r))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}let l9=new WeakMap,ce="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(ce,"1"),this.storage.removeItem(ce),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class cn extends ct{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){let e=W();return aE(e)||aA(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=aO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}let i=()=>{let e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Z()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cn.type="LOCAL";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends ct{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ci.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let n=new cr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:n,data:i}=e.data,r=this.handlersMap[n];if(!(null==r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:n});let s=Array.from(r).map(async t=>t(e.origin,i)),o=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:n,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}cr.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let i,r;let s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((o,a)=>{let l=cs("",20);s.port1.start();let c=setTimeout(()=>{a(Error("unsupported_event"))},n);r={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(c),clearTimeout(i),a(Error("invalid_response"))}}},this.handlers.add(r),s.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{r&&this.removeMessageHandler(r)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(){return void 0!==ca().WorkerGlobalScope&&"function"==typeof ca().importScripts}async function cc(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu="firebaseLocalStorageDb",ch="firebaseLocalStorage",cd="fbase_key";class cp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cf(e,t){return e.transaction([ch],t?"readwrite":"readonly").objectStore(ch)}function cm(){let e=indexedDB.open(cu,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(ch,{keyPath:cd})}catch(e){n(e)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(ch)?t(n):(n.close(),await new cp(indexedDB.deleteDatabase(cu)).toPromise(),t(await cm()))})})}async function cg(e,t,n){return new cp(cf(e,!0).put({[cd]:t,value:n})).toPromise()}async function c_(e,t){let n=cf(e,!1).get(t),i=await new cp(n).toPromise();return void 0===i?null:i.value}function cv(e,t){return new cp(cf(e,!0).delete(t)).toPromise()}class cy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await cm()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cr._getInstance(cl()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await cc(),!this.activeServiceWorker)return;this.sender=new co(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await cm();return await cg(e,ce,"1"),await cv(e,ce),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>cg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>c_(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new cp(cf(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],n=new Set;if(0!==e.length)for(let{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}cy.type="LOCAL";class cw{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){let n=this.counter;return this._widgets.set(n,new cb(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;let n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;return null===(t=this._widgets.get(e||1e12))||void 0===t||t.execute(),""}}class cb{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let i="string"==typeof e?document.getElementById(e):e;oW(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){let t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(0);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw Error("reCAPTCHA mock was already deleted!")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cI=aW("rcb"),cC=new oG(3e4,6e4);class cT{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=ca().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return(oW(t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(t)&&o4(ca().grecaptcha))?Promise.resolve(ca().grecaptcha):new Promise((n,i)=>{let r=ca().setTimeout(()=>{i(oF(e,"network-request-failed"))},cC.get());ca()[cI]=()=>{ca().clearTimeout(r),delete ca()[cI];let s=ca().grecaptcha;if(!s||!o4(s)){i(oF(e,"internal-error"));return}let o=s.render;s.render=(e,t)=>{let n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},az(`${aq.recaptchaV2Script}?${ed({onload:cI,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(r),i(oF(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=ca().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ck{async load(e){return new cw(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cE="recaptcha",cS={theme:"light",type:"image"};class cP{constructor(e,t,n=Object.assign({},cS)){this.parameters=n,this.type=cE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ek(e),this.isInvisible="invisible"===this.parameters.size,oW("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");let i="string"==typeof t?document.getElementById(t):t;oW(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ck:new cT,this.validateStartingState()}async verify(){this.assertNotDestroyed();let e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise(n=>{let i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oW(!this.parameters.sitekey,this.auth,"argument-error"),oW(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oW("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){let n=ca()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){oW(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){let e;oW(oH()&&!cl(),this.auth,"internal-error"),await (e=null,new Promise(t=>{if("complete"===document.readyState){t();return}e=()=>t(),window.addEventListener("load",e)}).catch(t=>{throw e&&window.removeEventListener("load",e),t})),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let t=await o7(this.auth);oW(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return oW(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=ls._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function cN(e,t,n){if(te(e.app))return Promise.reject(oj(e));let i=ek(e);return new cR(await cO(i,t,ek(n)),e=>lR(i,e))}async function cx(e,t,n){let i=ek(e);return await lE(!1,i,"phone"),new cR(await cO(i.auth,t,ek(n)),e=>lN(i,e))}async function cA(e,t,n){let i=ek(e);return te(i.auth.app)?Promise.reject(oj(i.auth)):new cR(await cO(i.auth,t,ek(n)),e=>lx(i,e))}async function cO(e,t,n){var i,r,s;let o=await n.verify();try{let a;if(oW("string"==typeof o,e,"argument-error"),oW(n.type===cE,e,"argument-error"),a="string"==typeof t?{phoneNumber:t}:t,"session"in a){let t=a.session;if("phoneNumber"in a)return oW("enroll"===t.type,e,"internal-error"),(await (r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}},oX(e,"POST","/v2/accounts/mfaEnrollment:start",oQ(e,r)))).phoneSessionInfo.sessionInfo;{oW("signin"===t.type,e,"internal-error");let n=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid;return oW(n,e,"missing-multi-factor-info"),(await (s={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}},oX(e,"POST","/v2/accounts/mfaSignIn:start",oQ(e,s)))).phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await le(e,{phoneNumber:a.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}async function cD(e,t){let n=ek(e);if(te(n.auth.app))return Promise.reject(oj(n.auth));await lk(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.providerId=cL.PROVIDER_ID,this.auth=ek(e)}verifyPhoneNumber(e,t){return cO(this.auth,e,ek(t))}static credential(e,t){return ls._fromVerification(e,t)}static credentialFromResult(e){return cL.credentialFromTaggedObject(e)}static credentialFromError(e){return cL.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?ls._fromTokenResponse(t,n):null}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(e,t){return t?aw(t):(oW(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}cL.PROVIDER_ID="phone",cL.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF extends aK{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return a7(e,this._buildIdpRequest())}_linkToIdToken(e,t){return a7(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return a7(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cU(e){return lP(e.auth,new cF(e),e.bypassAuthState)}function cj(e){let{auth:t,user:n}=e;return oW(n,t,"internal-error"),lS(n,new cF(e),e.bypassAuthState)}async function cq(e){let{auth:t,user:n}=e;return oW(n,t,"internal-error"),lk(n,new cF(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s){this.reject(s);return}let a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cU;case"linkViaPopup":case"linkViaRedirect":return cq;case"reauthViaPopup":case"reauthViaRedirect":return cj;default:oM(this.auth,"internal-error")}}resolve(e){var t,n;t=this.pendingPromise,n="Pending promise was never set",t||oV(n),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,n;t=this.pendingPromise,n="Pending promise was never set",t||oV(n),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cW=new oG(2e3,1e4);async function cV(e,t,n){if(te(e.app))return Promise.reject(oF(e,"operation-not-supported-in-this-environment"));let i=ek(e);oq(e,t,ll);let r=cM(i,n);return new c$(i,"signInViaPopup",t,r).executeNotNull()}async function cB(e,t,n){let i=ek(e);if(te(i.auth.app))return Promise.reject(oF(i.auth,"operation-not-supported-in-this-environment"));oq(i.auth,t,ll);let r=cM(i.auth,n);return new c$(i.auth,"reauthViaPopup",t,r,i).executeNotNull()}async function cH(e,t,n){let i=ek(e);oq(i.auth,t,ll);let r=cM(i.auth,n);return new c$(i.auth,"linkViaPopup",t,r,i).executeNotNull()}class c$ extends cz{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,c$.currentPopupAction&&c$.currentPopupAction.cancel(),c$.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return oW(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||oV(t);let n=cs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(oF(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(oF(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,c$.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,n;if(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oF(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cW.get())};e()}}c$.currentPopupAction=null;let cG=new Map;class cK extends cz{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=cG.get(this.auth._key());if(!e){try{let t=await cZ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}cG.set(this.auth._key(),e)}return this.bypassAuthState||cG.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cZ(e,t){let n=cX(t),i=cQ(e);if(!await i._isAvailable())return!1;let r=await i._get(n)==="true";return await i._remove(n),r}async function cY(e,t){return cQ(e)._set(cX(t),"true")}function cJ(e,t){cG.set(e._key(),t)}function cQ(e){return aw(e._redirectPersistence)}function cX(e){return aI("pendingRedirect",e.config.apiKey,e.name)}async function c0(e,t,n){if(te(e.app))return Promise.reject(oj(e));let i=ek(e);oq(e,t,ll),await i._initializationPromise;let r=cM(i,n);return await cY(r,i),r._openRedirect(i,t,"signInViaRedirect")}async function c1(e,t,n){let i=ek(e);if(oq(i.auth,t,ll),te(i.auth.app))return Promise.reject(oj(i.auth));await i.auth._initializationPromise;let r=cM(i.auth,n);await cY(r,i.auth);let s=await c4(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",s)}async function c2(e,t,n){let i=ek(e);oq(i.auth,t,ll),await i.auth._initializationPromise;let r=cM(i.auth,n);await lE(!1,i,t.providerId),await cY(r,i.auth);let s=await c4(i);return r._openRedirect(i.auth,t,"linkViaRedirect",s)}async function c3(e,t){return await ek(e)._initializationPromise,c5(e,t,!1)}async function c5(e,t,n=!1){if(te(e.app))return Promise.reject(oj(e));let i=ek(e),r=cM(i,t),s=new cK(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}async function c4(e){let t=cs(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class c6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c7(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!c7(e)){let i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(oF(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(c8(e))}saveEventToCache(e){this.cachedEventUids.add(c8(e)),this.lastProcessedEventTime=Date.now()}}function c8(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function c7({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(e,t={}){return oX(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ut=/^https?/;async function un(e){if(e.config.emulator)return;let{authorizedDomains:t}=await c9(e);for(let e of t)try{if(function(e){let t=oB(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){let r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!ut.test(n))return!1;if(ue.test(e))return i===e;let r=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}(e))return}catch(e){}oM(e,"unauthorized-domain")}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui=new oG(3e4,6e4);function ur(){let e=ca().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let us=null,uo=new oG(5e3,15e3),ua={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ul=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function uc(e){let t=await (us=us||new Promise((t,n)=>{var i,r,s;function o(){ur(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ur(),n(oF(e,"network-request-failed"))},timeout:ui.get()})}if(null===(r=null===(i=ca().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else if(null===(s=ca().gapi)||void 0===s?void 0:s.load)o();else{let t=aW("iframefcb");return ca()[t]=()=>{gapi.load?o():n(oF(e,"network-request-failed"))},az(`${aq.gapiScript}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw us=null,e})),n=ca().gapi;return oW(n,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;oW(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?oK(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:ts},r=ul.get(e.config.apiHost);r&&(i.eid=r);let s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ed(i).slice(1)}`}(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ua,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});let r=oF(e,"network-request-failed"),s=ca().setTimeout(()=>{i(r)},uo.get());function o(){ca().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let ud=encodeURIComponent("fac");async function up(e,t,n,i,r,s){oW(e.config.authDomain,e,"auth-domain-config-required"),oW(e.config.apiKey,e,"invalid-api-key");let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:ts,eventId:r};if(t instanceof ll)for(let[n,i]of(t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",el(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))o[n]=i;if(t instanceof lc){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}for(let t of(e.tenantId&&(o.tid=e.tenantId),Object.keys(o)))void 0===o[t]&&delete o[t];let a=await e._getAppCheckToken(),l=a?`#${ud}=${encodeURIComponent(a)}`:"";return`${function({config:e}){return e.emulator?oK(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${ed(o).slice(1)}${l}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf="webStorageSupport";class um{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ci,this._completeRedirectFn=c5,this._overrideRedirectResult=cJ}async _openPopup(e,t,n,i){var r,s,o;s=null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,o="_initialize() not called before _openPopup()",s||oV(o);let a=await up(e,t,n,oB(),i);return function(e,t,n,i=500,r=600){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",l=Object.assign(Object.assign({},uu),{width:i.toString(),height:r.toString(),top:s,left:o}),c=W().toLowerCase();n&&(a=aS(c)?"_blank":n),ak(c)&&(t=t||"http://localhost",l.scrollbars="yes");let u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=W()){var t;return aA(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){let n=document.createElement("a");n.href=e,n.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new uh(null);let h=window.open(t||"",a,u);oW(h,e,"popup-blocked");try{h.focus()}catch(e){}return new uh(h)}(e,a,cs())}async _openRedirect(e,t,n,i){var r;return await this._originValidation(e),r=await up(e,t,n,oB(),i),ca().location.href=r,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var n;let{manager:e,promise:i}=this.eventManagers[t];return e?Promise.resolve(e):(n="If manager is not set, promise should be",i||oV(n),i)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await uc(e),n=new c6(e);return t.register("authEvent",t=>(oW(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(uf,{type:uf},n=>{var i;let r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[uf];void 0!==r&&t(!!r),oM(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=un(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aO()||aE()||aA()}}class ug{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return oV("unexpected MultiFactorSessionType")}}}class u_ extends ug{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new u_(e)}_finalizeEnroll(e,t,n){return oX(e,"POST","/v2/accounts/mfaEnrollment:finalize",oQ(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return oX(e,"POST","/v2/accounts/mfaSignIn:finalize",oQ(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class uv{constructor(){}static assertion(e){return u_._fromCredential(e)}}uv.FACTOR_ID="phone";class uy{static assertionForEnrollment(e,t){return uw._fromSecret(e,t)}static assertionForSignIn(e,t){return uw._fromEnrollmentId(e,t)}static async generateSecret(e){var t,n;oW(void 0!==(null===(t=e.user)||void 0===t?void 0:t.auth),"internal-error");let i=await oX(n=e.user.auth,"POST","/v2/accounts/mfaEnrollment:start",oQ(n,{idToken:e.credential,totpEnrollmentInfo:{}}));return ub._fromStartTotpMfaEnrollmentResponse(i,e.user.auth)}}uy.FACTOR_ID="totp";class uw extends ug{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new uw(t,void 0,e)}static _fromEnrollmentId(e,t){return new uw(t,e)}async _finalizeEnroll(e,t,n){return oW(void 0!==this.secret,e,"argument-error"),oX(e,"POST","/v2/accounts/mfaEnrollment:finalize",oQ(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,t){oW(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let n={verificationCode:this.otp};return oX(e,"POST","/v2/accounts/mfaSignIn:finalize",oQ(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n}))}}class ub{constructor(e,t,n,i,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new ub(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(uI(e)||uI(t))&&(i=!0),i&&(uI(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),uI(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function uI(e){return void 0===e||(null==e?void 0:e.length)===0}var uC="@firebase/auth",uT="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oW(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return window}async function uS(e,t,n){var i,r,s;let{BuildInfo:o}=uE();r=t.sessionId,s="AuthEvent did not contain a session ID",r||oV(s);let a=await uN(t.sessionId),l={};return aA()?l.ibi=o.packageName:aR()?l.apn=o.packageName:oM(e,"operation-not-supported-in-this-environment"),o.displayName&&(l.appDisplayName=o.displayName),l.sessionId=a,up(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,l)}async function uP(e){let{BuildInfo:t}=uE(),n={};aA()?n.iosBundleId=t.packageName:aR()?n.androidPackageName=t.packageName:oM(e,"operation-not-supported-in-this-environment"),await c9(e,n)}async function uR(e,t,n){let{cordova:i}=uE(),r=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var e;s();let t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(oF(e,"redirect-cancelled-by-user"))},2e3))}function u(){(null==document?void 0:document.visibilityState)==="visible"&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),aR()&&document.addEventListener("visibilitychange",u,!1),r=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{r()}}async function uN(e){let t=function(e){var t,n;if(t=/[0-9a-zA-Z]+/.test(e),n="Can only convert alpha-numeric strings",t||oV(n),"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);let i=new Uint8Array(new ArrayBuffer(e.length));for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return i}(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}null===(y=j())||void 0===y||y._authIdTokenMaxAge,aq={loadJS:e=>new Promise((t,n)=>{var i,r;let s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{let t=oF("internal-error");t.customData=e,n(t)},s.type="text/javascript",s.charset="UTF-8",(null!==(r=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==r?r:document).appendChild(s)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},w="Browser",e6(new eE("auth",(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;oW(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});let a=new aU(n,i,r,{apiKey:s,authDomain:o,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aD(w)});return function(e,t){let n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(aw);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(a,t),a},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),e6(new eE("auth-internal",e=>new uk(ek(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),th(uC,uT,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(w)),th(uC,uT,"esm2017");class ux extends c6{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function uA(e){let t=await aw(cn)._get(uO(e));return t&&await aw(cn)._remove(uO(e)),t}function uO(e){return aI("authEvent",e.config.apiKey,e.name)}function uD(e){if(!(null==e?void 0:e.includes("?")))return{};let[t,...n]=e.split("?");return ep(n.join("?"))}class uL{constructor(){this._redirectPersistence=ci,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=c5,this._overrideRedirectResult=cJ}async _initialize(e){let t=e._key(),n=this.eventManagers.get(t);return n||(n=new ux(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){oM(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){!function(e){var t,n,i,r,s,o,a,l,c,u;let h=uE();oW("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oW(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oW("function"==typeof(null===(s=null===(r=null===(i=null==h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oW("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oW("function"==typeof(null===(u=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);let r=await this._initialize(e);await r.initialized(),r.resetRedirect(),cG.clear(),await this._originValidation(e);let s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:function(){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){let n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:oF(e,"no-auth-event")}}(e,n,i);await aw(cn)._set(uO(e),s);let o=await uS(e,s,t);return uR(e,r,await function(e){let{cordova:t}=uE();return new Promise(n=>{t.plugins.browsertab.isAvailable(i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,!function(e=W()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_system":"_blank","location=yes"),n(r)})})}(o))}_isIframeWebStorageSupported(e,t){throw Error("Method not implemented.")}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uP(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){let{universalLinks:n,handleOpenURL:i,BuildInfo:r}=uE(),s=setTimeout(async()=>{await uA(e),t.onEvent(uM())},500),o=async n=>{clearTimeout(s);let i=await uA(e),r=null;i&&(null==n?void 0:n.url)&&(r=function(e,t){var n,i;let r=function(e){let t=uD(e),n=t.link?decodeURIComponent(t.link):void 0,i=uD(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return uD(r).link||r||i||n||e}(t);if(r.includes("/__/auth/callback")){let t=uD(r),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(i=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=o?oF(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}(i,n.url)),t.onEvent(r||uM())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);let a=`${r.packageName.toLowerCase()}://`;uE().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(a)&&o({url:e}),"function"==typeof i)try{i(e)}catch(e){console.error(e)}}}}function uM(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:oF("no-auth-event")}}function uF(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function uU(e=W()){return!!(("file:"===uF()||"ionic:"===uF()||"capacitor:"===uF())&&e.toLowerCase().match(/iphone|ipad|ipod|android/))}function uj(){try{let e=self.localStorage,t=cs();if(e){if(e.setItem(t,"1"),e.removeItem(t),function(e=W()){return Z()&&(null==document?void 0:document.documentMode)===11||function(e=W()){return/Edge\/\d+/.test(e)}(e)}())return J();return!0}}catch(e){return uq()&&J()}return!1}function uq(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function uz(){return("http:"===uF()||"https:"===uF()||G()||uU())&&!(K()||B())&&uj()&&!uq()}function uW(){return uU()&&"undefined"!=typeof document}async function uV(){return!!uW()&&new Promise(e=>{let t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uB={LOCAL:"local",NONE:"none",SESSION:"session"},uH="persistence";async function u$(e){await e._initializationPromise;let t=uG(),n=aI(uH,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function uG(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}class uK{constructor(){this.browserResolver=aw(um),this.cordovaResolver=aw(uL),this.underlyingResolver=null,this._redirectPersistence=ci,this._completeRedirectFn=c5,this._overrideRedirectResult=cJ}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return uW()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return oW(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;let e=await uV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function uZ(e){let t;let{_tokenResponse:n}=e instanceof Q?e.customData:e;if(!n)return null;if(!(e instanceof Q)&&"temporaryProof"in n&&"phoneNumber"in n)return cL.credentialFromResult(e);let i=n.providerId;if(!i||i===oN.PASSWORD)return null;switch(i){case oN.GOOGLE:t=ld;break;case oN.FACEBOOK:t=lh;break;case oN.GITHUB:t=lp;break;case oN.TWITTER:t=lg;break;default:let{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=n;if(!s&&!o&&!r&&!a)return null;if(a){if(i.startsWith("saml."))return lf._create(i,a);return a9._fromParams({providerId:i,signInMethod:i,pendingToken:a,idToken:r,accessToken:s})}return new lu(i).credential({idToken:r,accessToken:s,rawNonce:l})}return e instanceof Q?t.credentialFromError(e):t.credentialFromResult(e)}function uY(e,t){return t.catch(t=>{throw t instanceof Q&&function(e,t){var n;let i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if((null==t?void 0:t.code)==="auth/multi-factor-auth-required")t.resolver=new uQ(e,function(e,t){var n;let i=ek(e);return oW(t.customData.operationType,i,"argument-error"),oW(null===(n=t.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),l8._fromError(i,t)}(e,t));else if(i){let e=uZ(t);e&&(t.credential=e,t.tenantId=i.tenantId||void 0,t.email=i.email||void 0,t.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{let t=e.operationType,n=e.user;return{operationType:t,credential:uZ(e),additionalUserInfo:function(e){let{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t,n;if(!e)return null;let{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){let i=null===(n=null===(t=ao(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new l0(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new l2(s,r);case"github.com":return new l3(s,r);case"google.com":return new l5(s,r);case"twitter.com":return new l4(s,r,e.screenName||null);case"custom":case"anonymous":return new l0(s,null);default:return new l0(s,i,r)}}(n)}(e),user:uX.getOrCreate(n)}})}async function uJ(e,t){let n=await t;return{verificationId:n.verificationId,confirm:t=>uY(e,n.confirm(t))}}class uQ{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return uY(this.auth.unwrap(),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(e){this._delegate=e,this.multiFactor=function(e){let t=ek(e);return l9.has(t)||l9.set(t,l7._fromUser(t)),l9.get(t)}(e)}static getOrCreate(e){return uX.USER_MAP.has(e)||uX.USER_MAP.set(e,new uX(e)),uX.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return uY(this.auth,lN(this._delegate,e))}async linkWithPhoneNumber(e,t){return uJ(this.auth,cx(this._delegate,e,t))}async linkWithPopup(e){return uY(this.auth,cH(this._delegate,e,uK))}async linkWithRedirect(e){return await u$(ek(this.auth)),c2(this._delegate,e,uK)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return uY(this.auth,lx(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return uJ(this.auth,cA(this._delegate,e,t))}reauthenticateWithPopup(e){return uY(this.auth,cB(this._delegate,e,uK))}async reauthenticateWithRedirect(e){return await u$(ek(this.auth)),c1(this._delegate,e,uK)}sendEmailVerification(e){return lZ(this._delegate,e)}async unlink(e){return await lT(this._delegate,e),this}updateEmail(e){return function(e,t){let n=ek(e);return te(n.auth.app)?Promise.reject(oj(n.auth)):lX(n,t,null)}(this._delegate,e)}updatePassword(e){return lX(ek(this._delegate),null,e)}updatePhoneNumber(e){return cD(this._delegate,e)}updateProfile(e){return lQ(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return lY(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}uX.USER_MAP=new WeakMap;class u0{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}let{apiKey:n}=e.options;oW(n,"invalid-api-key",{appName:e.name}),oW(n,"invalid-api-key",{appName:e.name});let i="undefined"!=typeof window?uK:void 0;this._delegate=t.initialize({options:{persistence:function(e,t){let n=function(e,t){let n=uG();if(!n)return[];let i=aI(uH,e,t);switch(n.getItem(i)){case uB.NONE:return[ab];case uB.LOCAL:return[cy,ci];case uB.SESSION:return[ci];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(cy)||n.push(cy),"undefined"!=typeof window)for(let e of[cn,ci])n.includes(e)||n.push(e);return n.includes(ab)||n.push(ab),n}(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(oA),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?uX.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){let i=ek(e);oW(i._canInitEmulator,i,"emulator-config-failed"),oW(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!(null==n?void 0:n.disableWarnings),s=a$(t),{host:o,port:a}=function(e){let t=a$(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let e=r[1];return{host:e,port:aG(i.substr(e.length+1))}}{let[e,t]=i.split(":");return{host:e,port:aG(t)}}}(t),l=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return lz(this._delegate,e)}checkActionCode(e){return lW(this._delegate,e)}confirmPasswordReset(e,t){return lq(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return uY(this._delegate,lB(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return lK(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){let n=lo.parseLink(t);return(null==n?void 0:n.operation)==="EMAIL_SIGNIN"}(this._delegate,e)}async getRedirectResult(){oW(uz(),this._delegate,"operation-not-supported-in-this-environment");let e=await c3(this._delegate,uK);return e?uY(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){ek(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){let{next:i,error:r,complete:s}=u1(e,t,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(e,t,n){let{next:i,error:r,complete:s}=u1(e,t,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(e,t){return lH(this._delegate,e,t)}sendPasswordResetEmail(e,t){return lj(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(!function(e,t){if(oW(Object.values(uB).includes(t),e,"invalid-persistence-type"),K()){oW(t!==uB.SESSION,e,"unsupported-persistence-type");return}if(B()){oW(t===uB.NONE,e,"unsupported-persistence-type");return}if(uq()){oW(t===uB.NONE||t===uB.LOCAL&&J(),e,"unsupported-persistence-type");return}oW(t===uB.NONE||uj(),e,"unsupported-persistence-type")}(this._delegate,e),e){case uB.SESSION:t=ci;break;case uB.LOCAL:t=await aw(cy)._isAvailable()?cy:cn;break;case uB.NONE:t=ab;break;default:return oM("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return uY(this._delegate,lw(this._delegate))}signInWithCredential(e){return uY(this._delegate,lR(this._delegate,e))}signInWithCustomToken(e){return uY(this._delegate,lO(this._delegate,e))}signInWithEmailAndPassword(e,t){var n;return uY(this._delegate,te((n=this._delegate).app)?Promise.reject(oj(n)):lR(ek(n),la.credential(e,t)).catch(async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&lU(n),e}))}signInWithEmailLink(e,t){return uY(this._delegate,l$(this._delegate,e,t))}signInWithPhoneNumber(e,t){return uJ(this._delegate,cN(this._delegate,e,t))}async signInWithPopup(e){return oW(uz(),this._delegate,"operation-not-supported-in-this-environment"),uY(this._delegate,cV(this._delegate,e,uK))}async signInWithRedirect(e){return oW(uz(),this._delegate,"operation-not-supported-in-this-environment"),await u$(this._delegate),c0(this._delegate,e,uK)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return lV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function u1(e,t,n){let i=e;"function"!=typeof e&&({next:i,error:t,complete:n}=e);let r=i;return{next:e=>r(e&&uX.getOrCreate(e)),error:t,complete:n}}u0.Persistence=uB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.providerId="phone",this._delegate=new cL(tE.auth().unwrap())}static credential(e,t){return cL.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}u2.PHONE_SIGN_IN_METHOD=cL.PHONE_SIGN_IN_METHOD,u2.PROVIDER_ID=cL.PROVIDER_ID;class u3{constructor(e,t,n=tE.app()){var i;oW(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new cP(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}tE.INTERNAL.registerComponent(new eE("auth-compat",e=>new u0(e.getProvider("app-compat").getImmediate(),e.getProvider("auth")),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:la,FacebookAuthProvider:lh,GithubAuthProvider:lp,GoogleAuthProvider:ld,OAuthProvider:lu,SAMLAuthProvider:lm,PhoneAuthProvider:u2,PhoneMultiFactorGenerator:uv,RecaptchaVerifier:u3,TwitterAuthProvider:lg,Auth:u0,AuthCredential:aK,Error:Q}).setInstantiationMode("LAZY").setMultipleInstances(!1)),tE.registerVersion("@firebase/auth-compat","0.5.10"),tE.apps.length||tE.initializeApp({apiKey:"AIzaSyA3ZJ-RyZYa_xGujY23MCPlt_MdwXRRrxw",authDomain:"iconbuddy-app.firebaseapp.com",projectId:"iconbuddy-app",databaseURL:"https://iconbuddy-app-default-rtdb.firebaseio.com"});var u5=tE},63686:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var i=n(85893),r=n(86854),s=n(67294),o=n(32047),a=n(87462),l=n(51834),c=n(41785),u={themes:n(33059).ZP.getPresets()},h=s.createContext(u),d=function(e){var t=e.children,n=e.themeType,i=e.themes,o=void 0===i?[]:i,u=(0,s.useState)({themes:l.Z.getPresets()}),d=(0,r.Z)(u,2),p=d[0],f=d[1],m=(0,s.useMemo)(function(){return p.themes.find(function(e){return e.type===n})||l.Z.getPresetStaticTheme()},[p,n]);return(0,s.useEffect)(function(){null!=o&&o.length&&f(function(e){var t=o.filter(function(e){return l.Z.isAvailableThemeType(e.type)}),n=l.Z.getPresets().concat(t);return(0,a.Z)({},e,{themes:n})})},[o]),s.createElement(h.Provider,{value:p},s.createElement(c.N.Provider,{value:m},t))},p=n(20732),f=n(77089),m=n(73935),g=n(9950),_=n(83937),v=n(9696),y=n(84633),w=n(45970),b=function(e,t){var n=function(e,n){n&&n(e,t)};return e&&e.length?e.map(function(e,t){return s.createElement(y.Z,{auto:!0,scale:1/3,font:"13px",type:e.passive?"default":"secondary",key:"action-".concat(t),onClick:function(t){return n(t,e.handler)}},e.name)}):null},I=function(e,t){var n={default:e.background,secondary:e.secondary,success:e.success,warning:e.warning,error:e.error};return t&&"default"!==t?{bgColor:n[t],color:"white"}:{bgColor:n.default,color:e.foreground}};(0,w.b)("topLeft","topRight","bottomLeft","bottomRight");var C=s.memo(function(e){var t=e.toast,n=e.layout,i=(0,_.Z)(),r=(0,s.useMemo)(function(){return I(i.palette,t.type)},[i.palette,t.type]),o=r.color,a=r.bgColor,l="string"!=typeof t.text,c=n.padding,u=n.margin,h=n.maxHeight,d=n.maxWidth,p=n.width,m=n.placement,g=(0,s.useMemo)(function(){return{enter:({topLeft:"translate(-60px, -60px)",topRight:"translate(60px, -60px)",bottomLeft:"translate(-60px, 60px)",bottomRight:"translate(60px, 60px)"})[m],leave:({topLeft:"translate(-50px, 15px) scale(0.85)",topRight:"translate(50px, 15px) scale(0.85)",bottomLeft:"translate(-50px, -15px) scale(0.85)",bottomRight:"translate(50px, -15px) scale(0.85)"})[m]}},[m]),y=g.enter,w=g.leave;return s.createElement(v.Z,{name:"toast",visible:t.visible,clearTime:350},s.createElement("div",{key:t.id,className:f.Z.dynamic([["1407001838",[p,d,h,i.palette.foreground,a,o,i.layout.radius,i.expressiveness.shadowSmall,i.layout.gapHalf,y,u,c,u,c,w]]])+" toast"},l?t.text:s.createElement(s.Fragment,null,s.createElement("div",{className:f.Z.dynamic([["1407001838",[p,d,h,i.palette.foreground,a,o,i.layout.radius,i.expressiveness.shadowSmall,i.layout.gapHalf,y,u,c,u,c,w]]])+" message"},t.text),s.createElement("div",{className:f.Z.dynamic([["1407001838",[p,d,h,i.palette.foreground,a,o,i.layout.radius,i.expressiveness.shadowSmall,i.layout.gapHalf,y,u,c,u,c,w]]])+" action"},b(t.actions,t.cancel))),s.createElement(f.Z,{id:"1407001838",dynamic:[p,d,h,i.palette.foreground,a,o,i.layout.radius,i.expressiveness.shadowSmall,i.layout.gapHalf,y,u,c,u,c,w]},".toast.__jsx-style-dynamic-selector{width:".concat(p,";max-width:").concat(d,";max-height:").concat(h,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:").concat(i.palette.foreground,";background-color:").concat(a,";color:").concat(o,";border:0;border-radius:").concat(i.layout.radius,";opacity:1;box-shadow:").concat(i.expressiveness.shadowSmall,";-webkit-transition:all 350ms cubic-bezier(0.1,0.2,0.1,1);transition:all 350ms cubic-bezier(0.1,0.2,0.1,1);overflow:hidden;}.message.__jsx-style-dynamic-selector{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;font-size:0.875em;display:-webkit-box;word-break:break-all;padding-right:").concat(i.layout.gapHalf,";overflow:hidden;max-height:100%;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2;line-height:1.1rem;}.toast-enter.__jsx-style-dynamic-selector{opacity:0;height:0;padding:0;margin:0;-webkit-transform:").concat(y,";-ms-transform:").concat(y,";transform:").concat(y,";}.toast-enter-active.__jsx-style-dynamic-selector{opacity:1;height:auto;margin:").concat(u,";padding:").concat(c,";-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);}.toast-leave.__jsx-style-dynamic-selector{opacity:1;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);height:auto;margin:").concat(u,";padding:").concat(c,";}.toast-leave-active.__jsx-style-dynamic-selector{opacity:0;-webkit-transform:").concat(w,";-ms-transform:").concat(w,";transform:").concat(w,";}"))))}),T=n(95073),k=function(){var e=(0,_.Z)(),t=(0,g.Z)("toast"),n=(0,p.Z)(!1),i=(0,r.Z)(n,3),l=i[1],c=i[2],u=(0,o.kW)(),h=u.toasts,d=u.updateToasts,v=u.toastLayout,y=u.lastUpdateToastId,w=(0,s.useMemo)(function(){return v},[v]),b=(0,s.useMemo)(function(){return h.map(function(e){return s.createElement(C,{toast:e,layout:w,key:e._internalIdent})})},[h,w]),I=(0,s.useMemo)(function(){var e,t;return(0,T.Z)("toasts",{top:(e=v.placement,"".concat(e).toLowerCase().startsWith("top")),left:(t=v.placement,"".concat(t).toLowerCase().endsWith("left"))})},[w]),k=function(e){if(l(e),e)return d(function(e){return e.map(function(e){return e.visible?(e._timeout&&window.clearTimeout(e._timeout),(0,a.Z)({},e,{timeout:null})):e})});d(function(e){return e.map(function(e,t){var n;return e.visible?(e._timeout&&window.clearTimeout(e._timeout),(0,a.Z)({},e,{_timeout:n=window.setTimeout(function(){e.cancel(),window.clearTimeout(n)},e.delay+100*t)})):e})})};return((0,s.useEffect)(function(){var e=h.findIndex(function(e){return e._internalIdent===y}),t=h[e];t&&!t.visible&&c.current&&!h.find(function(t,n){return n<e&&t.visible})&&c.current&&k(!1)},[h,y]),(0,s.useEffect)(function(){var e=null,t=window.setInterval(function(){0!==h.length&&(e=window.setTimeout(function(){h.find(function(e){return e.visible})||d(function(){return[]}),e&&clearTimeout(e)},350))},5e3);return function(){t&&clearInterval(t),e&&clearTimeout(e)}},[h]),t&&h&&0!==h.length)?(0,m.createPortal)(s.createElement("div",{onMouseEnter:function(){return k(!0)},onMouseLeave:function(){return k(!1)},className:f.Z.dynamic([["622610754",[e.layout.gap,e.layout.gap,e.layout.gap,e.layout.gap]]])+" "+(I||"")},b,s.createElement(f.Z,{id:"622610754",dynamic:[e.layout.gap,e.layout.gap,e.layout.gap,e.layout.gap]},".toasts.__jsx-style-dynamic-selector{position:fixed;width:auto;max-width:100%;right:".concat(e.layout.gap,";bottom:").concat(e.layout.gap,";z-index:2000;-webkit-transition:all 400ms ease;transition:all 400ms ease;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.top.__jsx-style-dynamic-selector{bottom:unset;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;top:").concat(e.layout.gap,";}.left.__jsx-style-dynamic-selector{right:unset;left:").concat(e.layout.gap,";}"))),t):null},E=function(e){var t=e.themes,n=e.themeType,i=e.children,a=(0,s.useState)(null),l=(0,r.Z)(a,2),c=l[0],u=l[1],h=(0,p.Z)([]),f=(0,r.Z)(h,3),m=f[0],g=f[1],_=f[2],v=(0,p.Z)(o.TP),y=(0,r.Z)(v,3),w=y[0],b=y[1],I=y[2],C=function(e){g(e(_.current))},T=function(e){b(e(I.current))},E=function(e){u(e())},S=(0,s.useMemo)(function(){return{toasts:m,toastLayout:w,updateToasts:C,lastUpdateToastId:c,updateToastLayout:T,updateLastToastId:E}},[m,w,c]);return s.createElement(o.b2.Provider,{value:S},s.createElement(d,{themes:t,themeType:n},i,s.createElement(k,null)))};let{flushToHTML:S}=f.server;var P=f.server,R=s.memo(function(e){var t=e.children,n=(0,_.Z)();return s.createElement(s.Fragment,null,t,s.createElement(f.Z,{id:"1357910706",dynamic:[n.palette.background,n.palette.foreground,n.palette.background,n.font.sans,n.font.sans,n.palette.link,n.expressiveness.linkStyle,n.expressiveness.linkHoverStyle,n.layout.gapHalf,n.layout.gapHalf,n.layout.gapHalf,n.layout.gap,n.palette.foreground,n.palette.accents_4,n.palette.code,n.font.mono,n.layout.gap,n.layout.gap,n.layout.gap,n.palette.accents_2,n.layout.radius,n.font.mono,n.palette.foreground,n.palette.accents_2,n.palette.accents_1,n.layout.gap,n.layout.gap,n.palette.accents_5,n.palette.accents_1,n.layout.radius,n.palette.border,n.palette.selection,n.palette.foreground]},"html,body{background-color:".concat(n.palette.background,";color:").concat(n.palette.foreground,";}html{font-size:16px;--geist-icons-background:").concat(n.palette.background,";}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.5;margin:0;padding:0;min-height:100%;position:relative;overflow-x:hidden;font-family:").concat(n.font.sans,";}#__next{overflow-x:hidden;}*,*:before,*:after{box-sizing:inherit;text-rendering:geometricPrecision;-webkit-tap-highlight-color:transparent;}p,small{font-weight:400;color:inherit;-webkit-letter-spacing:-0.005625em;-moz-letter-spacing:-0.005625em;-ms-letter-spacing:-0.005625em;letter-spacing:-0.005625em;font-family:").concat(n.font.sans,";}p{margin:1em 0;font-size:1em;line-height:1.625em;}small{margin:0;line-height:1.5;font-size:0.875em;}b{font-weight:600;}span{font-size:inherit;color:inherit;font-weight:inherit;}img{max-width:100%;}a{cursor:pointer;font-size:inherit;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-box-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:").concat(n.palette.link,";-webkit-text-decoration:").concat(n.expressiveness.linkStyle,";text-decoration:").concat(n.expressiveness.linkStyle,";}a:hover{-webkit-text-decoration:").concat(n.expressiveness.linkHoverStyle,";text-decoration:").concat(n.expressiveness.linkHoverStyle,";}ul,ol{padding:0;list-style-type:none;margin:").concat(n.layout.gapHalf," ").concat(n.layout.gapHalf," ").concat(n.layout.gapHalf," ").concat(n.layout.gap,";color:").concat(n.palette.foreground,";}ol{list-style-type:decimal;}li{margin-bottom:0.625em;font-size:1em;line-height:1.625em;}ul li:before{content:'';display:inline-block;color:").concat(n.palette.accents_4,";position:absolute;margin-left:-0.9375em;}h1,h2,h3,h4,h5,h6{color:inherit;margin:0 0 0.7rem 0;}h1{font-size:3rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;line-height:1.5;font-weight:700;}h2{font-size:2.25rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;}h3{font-size:1.5rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;}h4{font-size:1.25rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;}h5{font-size:1rem;-webkit-letter-spacing:-0.01em;-moz-letter-spacing:-0.01em;-ms-letter-spacing:-0.01em;letter-spacing:-0.01em;font-weight:600;}h6{font-size:0.875rem;-webkit-letter-spacing:-0.005em;-moz-letter-spacing:-0.005em;-ms-letter-spacing:-0.005em;letter-spacing:-0.005em;font-weight:600;}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit;color:inherit;margin:0;}button:focus,input:focus,select:focus,textarea:focus{outline:none;}code{color:").concat(n.palette.code,";font-family:").concat(n.font.mono,";font-size:0.9em;white-space:pre-wrap;}code:before,code:after{content:'\\`';}pre{padding:calc(").concat(n.layout.gap," * 0.9) ").concat(n.layout.gap,";margin:").concat(n.layout.gap," 0;border:1px solid ").concat(n.palette.accents_2,";border-radius:").concat(n.layout.radius,";font-family:").concat(n.font.mono,";white-space:pre;overflow:auto;line-height:1.5;text-align:left;font-size:14px;-webkit-overflow-scrolling:touch;}pre code{color:").concat(n.palette.foreground,";font-size:1em;line-height:1.25em;white-space:pre;}pre code:before,pre code:after{display:none;}pre p{margin:0;}pre::-webkit-scrollbar{display:none;width:0;height:0;background:transparent;}hr{border-color:").concat(n.palette.accents_2,";}details{background-color:").concat(n.palette.accents_1,";border:none;}details:focus,details:hover,details:active{outline:none;}summary{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;list-style:none;outline:none;}summary::marker,summary::before,summary::-webkit-details-marker{display:none;}summary::-moz-list-bullet{font-size:0;}summary:focus,summary:hover,summary:active{outline:none;list-style:none;}blockquote{padding:calc(0.667 * ").concat(n.layout.gap,") ").concat(n.layout.gap,";color:").concat(n.palette.accents_5,";background-color:").concat(n.palette.accents_1,";border-radius:").concat(n.layout.radius,";margin:1.5em 0;border:1px solid ").concat(n.palette.border,";}blockquote *:first-child{margin-top:0;}blockquote *:last-child{margin-bottom:0;}::selection{background-color:").concat(n.palette.selection,";color:").concat(n.palette.foreground,";}")))});R.flush=P,R.flushToHTML=S,n(89871);var N=n(25103),x=n(4298),A=n.n(x);let O="G-4VT98S28FB";var D=e=>{let{Component:t,pageProps:n}=e;return(0,i.jsxs)(E,{children:[(0,i.jsx)(R,{}),(0,i.jsx)(A(),{src:"https://static.cloudflareinsights.com/beacon.min.js","data-cf-beacon":'{"token": "9c1ae92af52d4aecb7b9c1edc3172382"}'}),(0,i.jsx)(A(),{src:"https://www.googletagmanager.com/gtag/js?id=".concat(O),strategy:"afterInteractive"}),(0,i.jsx)(A(),{id:"google-analytics",strategy:"afterInteractive",children:"\n    window.dataLayer = window.dataLayer || [];\n    function gtag(){window.dataLayer.push(arguments);}\n    gtag('js', new Date());\n    gtag('config', '".concat(O,"');\n  ")}),(0,i.jsx)("main",{children:(0,i.jsx)(N.H,{children:(0,i.jsx)(t,{...n})})})]})}},89871:function(){},77663:function(e){!function(){var t={229:function(e){var t,n,i,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l=[],c=!1,u=-1;function h(){c&&i&&(c=!1,i.length?l=i.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=a(h);c=!0;for(var t=l.length;t;){for(i=l,l=[];++u<t;)i&&i[u].run();u=-1,t=l.length}i=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,i),o=!1}finally{o&&delete n[e]}return s.exports}i.ab="//";var r=i(229);e.exports=r}()},4298:function(e,t,n){e.exports=n(32892)},30907:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:function(){return i}})},87462:function(e,t,n){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(null,arguments)}n.d(t,{Z:function(){return i}})},91:function(e,t,n){"use strict";function i(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||({}).propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,{Z:function(){return i}})},86854:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(40181);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,t)||(0,i.Z)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},71002:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return i}})},40181:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(30907);function r(e,t){if(e){if("string"==typeof e)return(0,i.Z)(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(91118),t(9090)}),_N_E=e.O()}]);